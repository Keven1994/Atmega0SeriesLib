<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=windows-1252">
	<TITLE></TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice 4.1.6  (Win32)">
	<META NAME="AUTHOR" CONTENT="Keven Kl&ouml;ckner">
	<META NAME="CREATED" CONTENT="20190505;10514225">
	<META NAME="CHANGEDBY" CONTENT="Keven Kl&ouml;ckner">
	<META NAME="CHANGED" CONTENT="20190510;16573213">
	<META NAME="CHANGEDBY" CONTENT="Keven Klöckner">
	<META NAME="CHANGEDBY" CONTENT="Keven Klöckner">
	<META NAME="CHANGEDBY" CONTENT="Keven Klöckner">
	<META NAME="CHANGEDBY" CONTENT="Keven Klöckner">
	<META NAME="CHANGEDBY" CONTENT="Keven Klöckner">
	<META NAME="CHANGEDBY" CONTENT="Keven Klöckner">
	<STYLE TYPE="text/css">
	<!--
		@page { margin: 2cm }
		P { margin-bottom: 0.21cm }
		PRE.cjk { font-family: "NSimSun", monospace }
	-->
	</STYLE>
</HEAD>
<BODY LANG="de-DE" DIR="LTR">
<P ALIGN=CENTER STYLE="margin-bottom: 0cm"><U><FONT SIZE=5>Atmega 0
Serie Library User Guide</U></FONT></P>
<P ALIGN=CENTER STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><FONT SIZE=4 STYLE="font-size: 16pt"><U>Programmierung:</U></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm; text-decoration: none"><FONT SIZE=3>Um
die Programme auf die Chips der Atmega 0 Serie zu flashen gibt es
grunds&auml;tzlich 2 Methoden:</FONT></P>
<UL>
	<LI><P ALIGN=LEFT STYLE="margin-bottom: 0cm"><A HREF="https://github.com/ElTangas/jtag2updi">https://github.com/ElTangas/jtag2updi</A>
	&rarr; hier wird ein Atmega328 oder ein vergleichbarer Chip zu einem
	Programmer umfunktioniert, hierzu kann z.B. ein fertiges
	Arduino-Board genutzt werden.</P>
	<LI><P ALIGN=LEFT STYLE="margin-bottom: 0cm"><A HREF="https://github.com/mraardvark/pyupdi">https://github.com/mraardvark/pyupdi</A>
	&rarr; hier wird mithilfe eines USB-UART Adapters geflashed, hier
	muss darauf geachtet werden dass der Widerstand stimmt, sollte der
	Widerstand nicht funktionieren muss eine Diode mit der Anode zu UPDI
	und Kathode zu Tx verbunden werden.</P>
</UL>
<P ALIGN=CENTER STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=CENTER STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm; text-decoration: none"><FONT SIZE=4 STYLE="font-size: 16pt"><U>Grunds&auml;tzliches:</U></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<UL>
	<UL>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0cm; text-decoration: none">
		<FONT SIZE=3>Die Library st&uuml;tzt sich auf den AVR-GCC 8.3+, es
		werden intern unter anderem Concepts genutzt, die Verwendung eines
		aktuellen C++ Compilers ist daher notwendig.</FONT></P>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0cm; text-decoration: none">
		<FONT SIZE=3>Am besten wird das enthaltene CMakefile genutzt um das
		Projekt zu erstellen, um den UC zu wechseln muss lediglich die
		Variable Mnumber und F_CPU abge&auml;ndert werden.</FONT></P>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0cm; text-decoration: none">
		<FONT SIZE=3>Optional: um ein schnelleres Compilieren zu
		erm&ouml;glichen kann nach dem ersten Compilieren in Zeile 112 im
		CmakeFile eine Zeile auskommentiert werden welche automatische
		Dateien generiert.</FONT></P>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0cm; text-decoration: none">
		<FONT SIZE=3>Es sollten nur die HW-Abstraktionen inkludiert werden,
		ansonsten kann kein ordnungsgem&auml;&szlig;es funktionieren
		gew&auml;hrleistet werden.</FONT></P>
	</UL>
</UL>
<UL>
	<UL>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0cm; text-decoration: none">
		<FONT SIZE=3>Der Erste Include <B>MUSS </B><SPAN STYLE="font-weight: normal">MCUSelect.hpp
		sein, hier findet die Auswahl des Ger&auml;tes statt.</SPAN></FONT></P>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0cm; font-weight: normal; text-decoration: none">
		<FONT SIZE=3>Port, PortPin und der Ressource Controller sind
		Standardm&auml;&szlig;ig inkludiert und m&uuml;ssen nicht nochmal
		explizit inkludiert werden.</FONT></P>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0cm; font-weight: normal; text-decoration: none">
		<FONT SIZE=3>Es ist notwendig, dass die von Atmel bereitgestellten
		header, library-files sowie device-specs der toolchain hinzugef&uuml;gt
		werden. </FONT>
		</P>
	</UL>
</UL>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm; font-weight: normal; text-decoration: none">
<FONT SIZE=4 STYLE="font-size: 16pt"><U>Basics:</U></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm; font-weight: normal; text-decoration: none">
<FONT SIZE=3>Zun&auml;chst wird betrachtet wie die Ports oder auch
spezifische Pins &uuml;ber die Library angesteuert werden.</FONT></P>
<PRE CLASS="western" STYLE="background: #2b2b2b"><FONT COLOR="#a9b7c6">        </FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#bbb529">#include </FONT><FONT COLOR="#6a8759">&quot;MCUSelect.hpp&quot;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#bbb529">#include </FONT><FONT COLOR="#6a8759">&quot;hw_abstractions/Delay.hpp&quot;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using </FONT>portA = AVR::port::Port&lt;AVR::port::A&gt;<FONT COLOR="#cc7832">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using </FONT>portC = AVR::port::Port&lt;AVR::port::C&gt;<FONT COLOR="#cc7832">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using </FONT>led1 = AVR::port::Pin&lt;portA<FONT COLOR="#cc7832">,</FONT><FONT COLOR="#6897bb">2</FONT>&gt;<FONT COLOR="#cc7832">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using </FONT>led2 = <FONT COLOR="#cc7832">typename </FONT>portC::pins::pin3<FONT COLOR="#cc7832">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using </FONT>led3 = AVR::port::Pin&lt;portA<FONT COLOR="#cc7832">,</FONT><FONT COLOR="#6897bb">3</FONT>&gt;<FONT COLOR="#cc7832">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using </FONT>led4 = AVR::port::Pin&lt;portA<FONT COLOR="#cc7832">,</FONT><FONT COLOR="#6897bb">4</FONT>&gt;<FONT COLOR="#cc7832">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using </FONT>led5 = AVR::port::Pin&lt;portA<FONT COLOR="#cc7832">,</FONT><FONT COLOR="#6897bb">5</FONT>&gt;<FONT COLOR="#cc7832">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">int </FONT><FONT COLOR="#ffc66d">main</FONT>() {</FONT></FONT>
<FONT COLOR="#a9b7c6">    <FONT FACE="Courier New">portA::setDir&lt;AVR::port::Out&gt;()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT FACE="Courier New">led2::setOutput()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">while</FONT></FONT><FONT FACE="Courier New">(</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">true</FONT></FONT><FONT FACE="Courier New">){</FONT></FONT>
<FONT COLOR="#a9b7c6">        <FONT FACE="Courier New">led1::toggle()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">if</FONT></FONT><FONT FACE="Courier New">(led2::isOn())</FONT></FONT>
<FONT COLOR="#a9b7c6">            <FONT FACE="Courier New">led3::toggle()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">led2::toggle()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">AVR::port::pinsOutToggle&lt;led4</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">,</FONT></FONT><FONT FACE="Courier New">led5&gt;()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">AVR::delay&lt;AVR::ms</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">,</FONT></FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">500</FONT></FONT><FONT FACE="Courier New">&gt;()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT FACE="Courier New">}</FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New">}</FONT></FONT></PRE><P ALIGN=LEFT STYLE="margin-bottom: 0cm">
<FONT COLOR="#000000"><FONT FACE="Times New Roman, serif">Zun&auml;chst
werden die Ports ausgew&auml;hlt welche angesprochen werden sollen,
hier in diesem Falle Port A und C. Sollte bei der Auswahl ein
Compiler Fehler auftreten wurde ein nicht existenter Port ausgew&auml;hlt
(der Atmega4808 besitzt z.B. keinen Port B oder E obwohl es Defines
daf&uuml;r gibt). Der n&auml;chste Schritt ist die Auswahl von
spezifischen Pins, daf&uuml;r wird dem template-Alias der zuvor
gew&auml;hlte Port sowie die Pin Nummer angegeben. Hier muss darauf
geachtet werden dass die spezifischen Pins NICHT auf Verf&uuml;gbarkeit
gepr&uuml;ft werden, um sicher zu gehen k&ouml;nnen die Pins auch aus
dem Port entnommen werden (s.a. Led2), die hier enthaltenen Pins sind
definitiv physikalisch vorhanden. Nachdem die Auswahl f&uuml;r Ports
und/oder Pins getroffen wurden k&ouml;nnen auf diesen Operationen
ausgef&uuml;hrt werden. Es k&ouml;nne sowohl auf den Ports als auch
auf den Pins spezifische Operationen ausgef&uuml;hrt werden (z.B.
toggle, on, off,setDir &hellip;.). Sollen auf mehreren Pins
gleichzeitig Operationen ausgef&uuml;hrt werden, so k&ouml;nnen die
freien Funktionen in AVR::port genutzt werden. Bei den freien
Funktionen ist zu beachten, dass nur Pins des gleichen Ports
&uuml;bergeben werden k&ouml;nnen, verschiedene Ports l&ouml;sen
einen Compiler-Fehler aus. Die Port Klasse besitzt noch die
Convenience-Methode &bdquo;get&ldquo; um auf Register zuzugreifen,
damit kann von au&szlig;erhalb auf ein spezifisches Register (z.B.
pin0ctrl) zugegriffen werden. Wenn m&ouml;glich sollte diese Methode
aber vermieden und vorhandene abstraktere Klassen-Methoden genutzt
werden. Im obigen Beispiel findet sich die delay-Methode, diese
wrappt die C _delay Methoden und rechnet je nach Einheit (us, ms, s)
korrekt um. Des weiteren gibt es noch eine safeDelay-Methode, diese
schaltet die Interrupts f&uuml;r die Dauer des wartens ab und
funktioniert somit immer korrekt (sollten die Interrupts angeschaltet
gewesen sein werden sie nach Ablauf des delays wieder aktiviert).</FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><FONT COLOR="#000000"><FONT FACE="Times New Roman, serif"><FONT SIZE=4 STYLE="font-size: 16pt"><U>RessourceController</U></FONT></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><FONT COLOR="#000000"><FONT FACE="Times New Roman, serif"><FONT SIZE=3>Die
Library stellt eine Klasse zur Verf&uuml;gung mit welcher die
Ressourcen auf ihre Kollisionsfreiheit &uuml;berpr&uuml;ft werden
k&ouml;nnen. Wenn diese Klasse genutzt wird ist es ausgeschlossen
dass darin angeforderte Ressourcen sich &uuml;berschneiden, wenn z.B
TWI PortA Pin 3 braucht und eine weitere Ressource diesen Pin belegen
wollen w&uuml;rde, so w&uuml;rde das Programm nicht kompilieren und
eine entsprechende Fehlermeldung ausgegeben.</FONT></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<PRE CLASS="western" STYLE="background: #2b2b2b"><FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using</FONT> twiInstance = AVR::rc::Instance&lt;</FONT></FONT>
<FONT COLOR="#a9b7c6">        <FONT FACE="Courier New">AVR::twi::TWI, // using ressource SPI</FONT></FONT>
<FONT COLOR="#a9b7c6">        <FONT FACE="Courier New">AVR::rc::Number&lt;0&gt;, //using instance '0'</FONT></FONT>
<FONT COLOR="#a9b7c6">        <FONT FACE="Courier New">AVR::portmux::PortMux&lt;0&gt;&gt;; // using portmux 0 alternative</FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using</FONT> usartInstance = AVR::rc::Instance&lt;</FONT></FONT>
<FONT COLOR="#a9b7c6">        <FONT FACE="Courier New">AVR::usart::USART_Comp, </FONT></FONT>
<FONT COLOR="#a9b7c6">        <FONT FACE="Courier New">AVR::rc::Number&lt;2&gt;, </FONT></FONT>
<FONT COLOR="#a9b7c6">        <FONT FACE="Courier New">AVR::portmux::PortMux&lt;0&gt;&gt;; </FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using</FONT> RC = AVR::rc::RessourceController&lt;twiInstance,usartInstance&gt;; </FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using</FONT> twiRessource = RC::getRessource_t&lt;twiRessource&gt;;</FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using</FONT> usartRessource = RC::getRessource_t&lt;usartRessource&gt;;</FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using</FONT> usart = AVR::usart::USART&lt;AVR::blocking,usartRessource&gt;;</FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using</FONT> twi = AVR::twi::TWIMaster&lt;AVR::blocking,twiRessource , AVR::ReadWrite&gt;;</FONT></FONT></PRE><P ALIGN=LEFT STYLE="margin-bottom: 0cm">
<BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><FONT COLOR="#000000"><FONT FACE="Times New Roman, serif"><FONT SIZE=4><U>Vorgehensweise</U></FONT></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><FONT COLOR="#000000"><FONT FACE="Times New Roman, serif"><FONT SIZE=3>Zuerst
wird die spezifische Instance einer Ressource festgelegt, diese
besteht aus der Ressource selbst, diese sind immer in den
dazugeh&ouml;rigen namespaces abgelegt (z.B. TWI/USART). Danach wird
der RessourceController mit den zu benutzenden Instanzen belegt,
danach kann mit der getRessource_t Klassen-Methode die Ressource
angefordert werden. Sollten anderweitig noch Pins genutzt werden (z.B
vom Benutzer f&uuml;r led's oder sonstiges) so kann/sollte eine
GenericRessource erzeugt und &uuml;bergeben werden (Auch hier wird
die physikalische Existenz der Pins nicht &uuml;berpr&uuml;ft!).</FONT></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<PRE CLASS="western" STYLE="background: #2b2b2b"><FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using </FONT>led1 = Pin&lt;PortA<FONT COLOR="#cc7832">, </FONT><FONT COLOR="#6897bb">0</FONT>&gt;<FONT COLOR="#cc7832">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using </FONT>led2 = Pin&lt;PortA<FONT COLOR="#cc7832">, </FONT><FONT COLOR="#6897bb">1</FONT>&gt;<FONT COLOR="#cc7832">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using </FONT>led3 = Pin&lt;PortD<FONT COLOR="#cc7832">, </FONT><FONT COLOR="#6897bb">6</FONT>&gt;<FONT COLOR="#cc7832">;</FONT></FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using </FONT>gRes = AVR::rc::GenericRessource&lt;led1<FONT COLOR="#cc7832">,</FONT>led2,led3&gt;<FONT COLOR="#cc7832">;</FONT></FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using </FONT>RC = AVR::rc::RessourceController&lt;twiIntance<FONT COLOR="#cc7832">,</FONT>usartInstance<FONT COLOR="#cc7832">,</FONT>gRes &gt;<FONT COLOR="#cc7832">;</FONT></FONT></FONT></PRE><P ALIGN=LEFT STYLE="margin-bottom: 0cm">
Wenn alle Ressourcen mit dem RessourceController &uuml;berpr&uuml;ft
werden ist ein Konflikt der Ressourcen Belegung zur Compile-Zeit
ausgeschlossen. Zu beachten ist allerdings dass bei den meisten
Ressourcen wie z.B. TWI, USART und SPI alle Pins welche dort benutzt
werden k&ouml;nnen auch gepr&uuml;ft werden. Sollte also z.B.
MasterSPI als ReadOnly konfiguriert werden so wird logischerweise der
Miso-Pin nicht benutzt, aber im RessourceController trotzdem gepr&uuml;ft.
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<PRE CLASS="western" STYLE="background: #2b2b2b"><FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using </FONT>spiRessource = AVR::rc::Instance&lt;</FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New">AVR::spi::SPI<FONT COLOR="#cc7832">, </FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New">AVR::rc::Number&lt;<FONT COLOR="#6897bb">0</FONT>&gt;<FONT COLOR="#cc7832">, </FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New">AVR::portmux::PortMux&lt;<FONT COLOR="#6897bb">0</FONT>&gt;&gt;<FONT COLOR="#cc7832">; </FONT></FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using </FONT>uncheckedSPI = AVR::rc::UncheckedRessource_t&lt;spiRessource&gt;<FONT COLOR="#cc7832">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using </FONT>spi = AVR::spi::SPIMaster&lt;AVR::notBlocking&lt;AVR::UseFifo&lt;<FONT COLOR="#6897bb">42</FONT>&gt; <FONT COLOR="#cc7832">,</FONT>AVR::Interrupts&lt;&gt; &gt;<FONT COLOR="#cc7832">,</FONT>uncheckedSPI <FONT COLOR="#cc7832">, </FONT>AVR::ReadOnly&gt;<FONT COLOR="#cc7832">;</FONT></FONT></FONT></PRE><P ALIGN=LEFT STYLE="margin-bottom: 0cm">
Sollte der besagte Pin trotzdem von einer anderen Ressource verwendet
werden besteht die M&ouml;glichkeit eine Ressource von der Pr&uuml;fung
auszuschlie&szlig;en indem UncheckedRessource verwendet wird.</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><FONT SIZE=4 STYLE="font-size: 16pt"><U>Eventsystem</U></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm; text-decoration: none"><FONT SIZE=3>Das
Eventsystem der 0 Serie erm&ouml;glicht Peripherie Abh&auml;ngige
Funktionalit&auml;ten mit deren Hilfe die Peripherie ohne Interrupts
Synchron und Asynchron kommunizieren kann. Das Eventsystem kann nur
so konfiguriert werden dass je Kanal ein Generator l&auml;uft und
dieser Kanal jeweils von beliebig vielen Users abgeh&ouml;rt werden
kann, die einzelnen Funktionen der Users sowie das Verhalten der
Generatoren m&uuml;ssen vor Benutzung nachgelesen werden. Da die
Konfigurationsm&ouml;glichkeiten beschr&auml;nkt sind f&auml;llt die
Schnittstelle entsprechend Schmal aus.</FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<PRE CLASS="western" STYLE="background: #2b2b2b"><FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using </FONT>ch0 = AVR::eventsystem::Channel&lt;<FONT COLOR="#6897bb">0</FONT>&gt;<FONT COLOR="#cc7832">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using </FONT>ch0_gen = <FONT COLOR="#cc7832">typename </FONT>ch0::generators::generals::spi0_sck<FONT COLOR="#cc7832">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using </FONT>user0 = <FONT COLOR="#cc7832">typename </FONT>ch0::users::evtca0<FONT COLOR="#cc7832">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using </FONT>user1 = <FONT COLOR="#cc7832">typename </FONT>ch0::users::evtcb0<FONT COLOR="#cc7832">;</FONT></FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">int </FONT><FONT COLOR="#ffc66d">main</FONT>() {</FONT></FONT>
<FONT COLOR="#a9b7c6">    <FONT FACE="Courier New">ch0::</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">template </FONT></FONT><FONT FACE="Courier New">registerListener&lt;user0,user1&gt;()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT FACE="Courier New">ch0::</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">template </FONT></FONT><FONT FACE="Courier New">setGenerator&lt;ch0_gen &gt;()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT FACE="Courier New">ch0::softwareEvent()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT></PRE><P ALIGN=LEFT STYLE="margin-bottom: 0cm; text-decoration: none">
<FONT SIZE=3>Zun&auml;chst wird der Kanal ausgew&auml;hlt der Benutzt
werden soll (Kanal 0- maximal 8), sollte hier ein ung&uuml;ltiger
Kanal gew&auml;hlt werden wird das Programm nicht kompilieren. Als
n&auml;chstes wird der Generator und der/die Benutzer ausgew&auml;hlt.
Dann werden die Benutzer auf den Kanal eingestellt und der Generator
wird f&uuml;r den Kanal eingestellt. Das Eventsystem erm&ouml;glicht
des Weiteren das Ausl&ouml;sen von Software-Events, dies wird mir der
entsprechenden Funktion erm&ouml;glicht.</FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><FONT SIZE=4 STYLE="font-size: 16pt"><U>TWI</U></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm; text-decoration: none"><FONT SIZE=3>Die
TWI Schnittstelle ist aus Aufwandsgr&uuml;nden nur f&uuml;r den
Master Modus eingerichtet, die Quick-Command Funktionalit&auml;t
wurde aus Gr&uuml;nden der Kompatibilit&auml;t zwischen TWI und I&sup2;C
abgeschaltet, hier wurden Probleme bei der Kommunikation zwischen
verschiedenen Ger&auml;ten sichtbar. Ansonsten kann die TWI-Master
Schnittstelle mit allen m&ouml;glichen Eigenschaften konfiguriert
werden, empfehlenswert ist aber lediglich die Anpassung der
Zugriffsart (RW / R / W) sowie Blockierend / nicht blockierend oder
auch Interruptdriven, ob eine FiFo genutzt wird und Instanzauswahl
(wenn die anderen Eigenschaften angepassst werden so ist das
Verhalten <B>NICHT</B> getestet), nachfolgend einige Beispiele.</FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm; text-decoration: none"><FONT SIZE=3>Die
Frequenzrate wird &uuml;ber die init Methode festgelegt, sofern
fastmode plus nicht aktiviert ist (default Einstellung ist aus), so
ist die rate auf 400khz beschr&auml;nkt.</FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm; text-decoration: none"><FONT SIZE=3>Hinweis:
Es wird nicht kontrolliert ob der Slave die Adresse best&auml;tigt
hat ,dieser Fall sollte/muss abgefangen werden!</FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<PRE CLASS="western" STYLE="background: #333333; text-align: left; text-decoration: none"><FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using </FONT>twi = AVR::twi::TWIMaster&lt;AVR::notBlocking&lt;AVR::UseFifo&lt;<FONT COLOR="#6897bb">42</FONT>&gt;<FONT COLOR="#cc7832">,</FONT>AVR::NoInterrupts&gt;<FONT COLOR="#cc7832">,</FONT>twires <FONT COLOR="#cc7832">, </FONT>AVR::ReadOnly&gt;<FONT COLOR="#cc7832">;</FONT></FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">volatile bool </FONT>wasread = <FONT COLOR="#cc7832">false;</FONT></FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">static inline void </FONT><FONT COLOR="#ffc66d">Callback </FONT>(){</FONT></FONT>
<FONT COLOR="#a9b7c6">    <FONT FACE="Courier New">wasread=</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">true;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT COLOR="#b9bcd1"><FONT FACE="Courier New">uint8_t </FONT></FONT><FONT FACE="Courier New">item</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">while</FONT></FONT><FONT FACE="Courier New">(twi::getInputFifo().pop_front(item))</FONT></FONT>
<FONT COLOR="#a9b7c6">        <FONT FACE="Courier New">AVR::dbgout::put(item)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New">}</FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">int </FONT><FONT COLOR="#ffc66d">main</FONT>() {</FONT></FONT>
<FONT COLOR="#a9b7c6">    <FONT FACE="Courier New">twi::init&lt;100000&gt;()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT FACE="Courier New">AVR::dbgout::init()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">while</FONT></FONT><FONT FACE="Courier New">(</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">true</FONT></FONT><FONT FACE="Courier New">){</FONT></FONT>
<FONT COLOR="#a9b7c6">        <FONT FACE="Courier New">twi::get&lt;</FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">42</FONT></FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">,</FONT></FONT><FONT FACE="Courier New">Callback&gt;(</FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">12</FONT></FONT><FONT FACE="Courier New">)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">while</FONT></FONT><FONT FACE="Courier New">(!wasread)</FONT></FONT>
<FONT COLOR="#a9b7c6">            <FONT FACE="Courier New">twi::periodic()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">AVR::dbgout::flush()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">AVR::delay&lt;AVR::ms</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">,</FONT></FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">200</FONT></FONT><FONT FACE="Courier New">&gt;()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">wasread = </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">false;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT FACE="Courier New">}</FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New">}</FONT></FONT></PRE><P ALIGN=LEFT STYLE="margin-bottom: 0cm; text-decoration: none">
<FONT SIZE=3>Dieses Beispiel zeigt die Konfiguration der
Schnittstelle als nicht blockierend, Readonly und Fifo Benutzend und
ohne Interrupts, bei der TWI Schnittstelle wurde auf eine nicht
blockierende Variante ohne FiFo verzichtet, da diese Version mangels
Abstraktion zu fehleranf&auml;llig w&auml;re. Die get Methode wird
mit den template Parametern der Addresse und einer Callback Funktion
(oder auch lambda) versehen, als Parameter wird die Anzahl der zu
lesenden Bytes &uuml;bergeben. Ohne Interrupts muss in der Schleife
periodic aufgerufen werden, sonst werden weder Daten empfangen noch
gesendet. Wenn der Lesevorgang vollendet wurde (die angegebene Anzahl
an Bytes wurde gelesen), wird die Callback Funktion aufgerufen und
der Benutzer kann festlegen was passieren soll (sinnvoll ist auf
jedenfall die FiFo zu leeren wie im Beispiel).</FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<PRE CLASS="western" STYLE="background: #333333; text-align: left; text-decoration: none"><FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">static constexpr const char</FONT>* hello = <FONT COLOR="#6a8759">&quot;Hello Slave&quot;</FONT><FONT COLOR="#cc7832">;</FONT></FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">int </FONT><FONT COLOR="#ffc66d">main</FONT>() {</FONT></FONT>
<FONT COLOR="#a9b7c6">    <FONT FACE="Courier New">twi::init()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">static constexpr auto </FONT></FONT><FONT FACE="Courier New">len = </FONT><FONT COLOR="#b5b6e3"><FONT FACE="Courier New">utils</FONT></FONT><FONT FACE="Courier New">::strlen(hello)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">while</FONT></FONT><FONT FACE="Courier New">(</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">true</FONT></FONT><FONT FACE="Courier New">){</FONT></FONT>
<FONT COLOR="#a9b7c6">        <FONT FACE="Courier New">twi::put&lt;</FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">42</FONT></FONT><FONT FACE="Courier New">&gt;((uint8_t*)hello</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">,</FONT></FONT><FONT FACE="Courier New">len)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">            </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">while</FONT></FONT><FONT FACE="Courier New">( twi::dataToSend())</FONT></FONT>
<FONT COLOR="#a9b7c6">                <FONT FACE="Courier New">twi::periodic()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">AVR::delay&lt;AVR::ms</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">,</FONT></FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">200</FONT></FONT><FONT FACE="Courier New">&gt;()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT FACE="Courier New">}</FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New">}</FONT></FONT></PRE><P ALIGN=LEFT STYLE="margin-bottom: 0cm; text-decoration: none">
<FONT SIZE=3>Hier im Beispiel wird die Verwendung des Schreibens
gezeigt, hier wird solange periodic aufgerufen bis keine Daten zum
Schreiben mehr vorhanden sind.</FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<PRE CLASS="western" STYLE="background: #2b2b2b"><FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using </FONT>twi = AVR::twi::TWIMaster&lt;AVR::notBlocking&lt;AVR::NoFifo<FONT COLOR="#cc7832">,</FONT>AVR::NoInterrupts&gt;<FONT COLOR="#cc7832">,</FONT>twires <FONT COLOR="#cc7832">, </FONT>AVR::ReadOnly&gt;<FONT COLOR="#cc7832">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">static constexpr </FONT><FONT COLOR="#b9bcd1">uint8_t </FONT>size = <FONT COLOR="#6897bb">12</FONT><FONT COLOR="#cc7832">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">static </FONT><FONT COLOR="#b9bcd1">uint8_t </FONT>arr[size]<FONT COLOR="#cc7832">;</FONT></FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">int </FONT><FONT COLOR="#ffc66d">main</FONT>() {</FONT></FONT>
<FONT COLOR="#a9b7c6">    <FONT FACE="Courier New">twi::init()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">while</FONT></FONT><FONT FACE="Courier New">(</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">true</FONT></FONT><FONT FACE="Courier New">){</FONT></FONT>
<FONT COLOR="#a9b7c6">        <FONT COLOR="#cc7832"><FONT FACE="Courier New">while</FONT></FONT><FONT FACE="Courier New">(!twi::startTransaction&lt;</FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">42</FONT></FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">,</FONT></FONT><FONT FACE="Courier New">AVR::twi::access::Read&gt;())</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT COLOR="#b9bcd1"><FONT FACE="Courier New">uint8_t </FONT></FONT><FONT FACE="Courier New">tmp = </FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">0</FONT></FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">while</FONT></FONT><FONT FACE="Courier New">(tmp != size){</FONT></FONT>
<FONT COLOR="#a9b7c6">            <FONT FACE="Courier New">tmp += twi::receive(arr</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">,</FONT></FONT><FONT FACE="Courier New">size-tmp)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">}</FONT></FONT>
<FONT COLOR="#a9b7c6">        </FONT>
<FONT COLOR="#a9b7c6">        <FONT FACE="Courier New">AVR::delay&lt;AVR::ms</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">,</FONT></FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">200</FONT></FONT><FONT FACE="Courier New">&gt;()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#cc7832">        </FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT FACE="Courier New">}</FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New">}</FONT></FONT></PRE><P ALIGN=LEFT STYLE="margin-bottom: 0cm; text-decoration: none">
<FONT SIZE=3>wird keine FiFo genutzt dann wird von der receive
Methode die Anzahl gelesener Bytes zur&uuml;ckgegeben (bei einem
einzelnen Lesevorgang ein Boolean ob ein Byte gelesen wurde),
logischerweise muss der Anwender ohne FiFo eigene Ma&szlig;nahmen
treffen um entsprechend viele Bytes zu lesen (siehe Beispiel code).
Auch das Ausl&ouml;sen der Start &ndash; sowie StopCondition m&uuml;ssen
dann manuell eingepflegt werden, Ausnahme betrifft das lesen, hier
wird die stopCondition mit dem lesen des letzen Bytes austomatisch
ausgef&uuml;hrt.</FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<PRE CLASS="western" STYLE="background: #2b2b2b"><FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">static constexpr </FONT><FONT COLOR="#b9bcd1">uint8_t </FONT>size = <FONT COLOR="#6897bb">12</FONT><FONT COLOR="#cc7832">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">static </FONT><FONT COLOR="#b9bcd1">uint8_t </FONT>arr[size]<FONT COLOR="#cc7832">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">int </FONT><FONT COLOR="#ffc66d">main</FONT>() {</FONT></FONT>
<FONT COLOR="#a9b7c6">    <FONT FACE="Courier New">twi::init()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">while</FONT></FONT><FONT FACE="Courier New">(</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">true</FONT></FONT><FONT FACE="Courier New">){</FONT></FONT>
<FONT COLOR="#a9b7c6">        <FONT COLOR="#b9bcd1"><FONT FACE="Courier New">uint8_t </FONT></FONT><FONT FACE="Courier New">tmp = </FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">0</FONT></FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">auto </FONT></FONT><FONT FACE="Courier New">rd = twi::scopedRead&lt;</FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">42</FONT></FONT><FONT FACE="Courier New">&gt;()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT COLOR="#b9bcd1"><FONT FACE="Courier New">uint8_t </FONT></FONT><FONT FACE="Courier New">data</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">while</FONT></FONT><FONT FACE="Courier New">(tmp != </FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">11</FONT></FONT><FONT FACE="Courier New">){</FONT></FONT>
<FONT COLOR="#a9b7c6">            <FONT COLOR="#cc7832"><FONT FACE="Courier New">if</FONT></FONT><FONT FACE="Courier New">(rd.receive(data))</FONT></FONT>
<FONT COLOR="#a9b7c6">                <FONT FACE="Courier New">arr[tmp++] = data</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">}</FONT></FONT>
<FONT COLOR="#a9b7c6">        <FONT COLOR="#cc7832"><FONT FACE="Courier New">while</FONT></FONT><FONT FACE="Courier New">(!rd.receiveLast(data))</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">arr[tmp] = data</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#cc7832"><FONT COLOR="#ffffff">}</FONT>        </FONT></PRE><P ALIGN=LEFT STYLE="margin-bottom: 0cm; text-decoration: none">
<FONT SIZE=3>Alternativ k&ouml;nnen bei nicht verwenden der nicht
blockierenden NoFifo Varianten auch Scoped Varianten genutzt werden,
somit muss sich nicht mehr explizit um die Start-Stop Conditions
gek&uuml;mmert werden, auch hier gilt die Ausnahme des Lesens (siehe
Beispiel).</FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<PRE CLASS="western" STYLE="background: #2b2b2b"><FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">static constexpr const char</FONT>* hello = <FONT COLOR="#6a8759">&quot;Hello Slave&quot;</FONT><FONT COLOR="#cc7832">;</FONT></FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">int </FONT><FONT COLOR="#ffc66d">main</FONT>() {</FONT></FONT>
<FONT COLOR="#a9b7c6">    <FONT FACE="Courier New">twi::init()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">static constexpr auto </FONT></FONT><FONT FACE="Courier New">len = </FONT><FONT COLOR="#b5b6e3"><FONT FACE="Courier New">utils</FONT></FONT><FONT FACE="Courier New">::strlen(hello)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">while</FONT></FONT><FONT FACE="Courier New">(</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">true</FONT></FONT><FONT FACE="Courier New">){</FONT></FONT>
<FONT COLOR="#a9b7c6">        <FONT COLOR="#cc7832"><FONT FACE="Courier New">auto </FONT></FONT><FONT FACE="Courier New">wr = twi::scopedWrite&lt;</FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">42</FONT></FONT><FONT FACE="Courier New">&gt;()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">for</FONT></FONT><FONT FACE="Courier New">(</FONT><FONT COLOR="#b9bcd1"><FONT FACE="Courier New">uint8_t </FONT></FONT><FONT FACE="Courier New">i = </FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">0</FONT></FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">; </FONT></FONT><FONT FACE="Courier New">i &lt; len</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">; </FONT></FONT><FONT FACE="Courier New">) {</FONT></FONT>
<FONT COLOR="#a9b7c6">            <FONT COLOR="#cc7832"><FONT FACE="Courier New">if </FONT></FONT><FONT FACE="Courier New">(wr.send((uint8_t) *(hello + i)))</FONT></FONT>
<FONT COLOR="#a9b7c6">                <FONT FACE="Courier New">i++</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">}</FONT></FONT>
<FONT COLOR="#a9b7c6">        </FONT>
<FONT COLOR="#a9b7c6">        <FONT FACE="Courier New">AVR::delay&lt;AVR::ms</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">,</FONT></FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">200</FONT></FONT><FONT FACE="Courier New">&gt;()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT FACE="Courier New">}</FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New">}</FONT></FONT></PRE><P STYLE="background: #ffffff">
Hier wird noch die ScopedWrite Variante gezeigt, somit muss der
Nutzer sich nicht um Start-Stop Conditions k&uuml;mmern.</P>
<PRE CLASS="western" STYLE="background: #333333"><FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">static constexpr const char* </FONT><FONT COLOR="#b2b2b2">hello</FONT><FONT COLOR="#cc7832"> = </FONT><FONT COLOR="#6a8759">&quot;Hello Slave&quot;</FONT><FONT COLOR="#cc7832">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using </FONT>twi = AVR::twi::TWIMaster&lt;AVR::notBlocking&lt;AVR::UseFifo&lt;<FONT COLOR="#6897bb">42</FONT>&gt;<FONT COLOR="#cc7832">,</FONT>AVR::Interrupts&lt;&gt;&gt;<FONT COLOR="#cc7832">,</FONT>twires <FONT COLOR="#cc7832">, </FONT>AVR::WriteOnly&gt;<FONT COLOR="#cc7832">;</FONT></FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#908b25">ISR</FONT>(TWI0_TWIM_vect){</FONT></FONT>
<FONT COLOR="#a9b7c6">    <FONT FACE="Courier New">twi::intHandler()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New">}</FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">int </FONT><FONT COLOR="#ffc66d">main</FONT>() {</FONT></FONT>
<FONT COLOR="#a9b7c6">    <FONT FACE="Courier New">twi::init()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">static constexpr auto </FONT></FONT><FONT FACE="Courier New">len = </FONT><FONT COLOR="#b5b6e3"><FONT FACE="Courier New">utils</FONT></FONT><FONT FACE="Courier New">::strlen(hello)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">while</FONT></FONT><FONT FACE="Courier New">(</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">true</FONT></FONT><FONT FACE="Courier New">){</FONT></FONT>
<FONT COLOR="#a9b7c6">        <FONT FACE="Courier New">twi::put&lt;</FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">42</FONT></FONT><FONT FACE="Courier New">&gt;((uint8_t*)hello</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">,</FONT></FONT><FONT FACE="Courier New">len)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">AVR::delay&lt;AVR::ms</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">,</FONT></FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">200</FONT></FONT><FONT FACE="Courier New">&gt;()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT FACE="Courier New">}</FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New">}</FONT></FONT></PRE><P>
Diese Interrupt gesteuerte Version wird im Intervall von 200 ms den
String Hello Slave an den Slave mit der Addresse 42 senden.</P>
<PRE CLASS="western" STYLE="background: #333333; text-align: left"><FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using </FONT>twi = AVR::twi::TWIMaster&lt;AVR::notBlocking&lt;AVR::UseFifo&lt;<FONT COLOR="#6897bb">42</FONT>&gt;<FONT COLOR="#cc7832">,</FONT>AVR::Interrupts&lt;&gt;&gt;<FONT COLOR="#cc7832">,</FONT>twires <FONT COLOR="#cc7832">, </FONT>AVR::ReadOnly&gt;<FONT COLOR="#cc7832">;</FONT></FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">volatile bool </FONT>wasread = <FONT COLOR="#cc7832">false;</FONT></FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#908b25">ISR</FONT>(TWI0_TWIM_vect){</FONT></FONT>
<FONT COLOR="#a9b7c6">    <FONT FACE="Courier New">twi::intHandler()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New">}</FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">static inline void </FONT><FONT COLOR="#ffc66d">Callback </FONT>(){</FONT></FONT>
<FONT COLOR="#a9b7c6">    <FONT FACE="Courier New">wasread=</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">true;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT COLOR="#b9bcd1"><FONT FACE="Courier New">uint8_t </FONT></FONT><FONT FACE="Courier New">item</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">while</FONT></FONT><FONT FACE="Courier New">(twi::getInputFifo().pop_front(item))</FONT></FONT>
<FONT COLOR="#a9b7c6">        <FONT FACE="Courier New">AVR::dbgout::put(item)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New">}</FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">int </FONT><FONT COLOR="#ffc66d">main</FONT>() {</FONT></FONT>
<FONT COLOR="#a9b7c6">    <FONT FACE="Courier New">twi::init()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT FACE="Courier New">AVR::dbgout::init()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">while</FONT></FONT><FONT FACE="Courier New">(</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">true</FONT></FONT><FONT FACE="Courier New">){</FONT></FONT>
<FONT COLOR="#a9b7c6">        <FONT FACE="Courier New">twi::get&lt;</FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">42</FONT></FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">,</FONT></FONT><FONT FACE="Courier New">Callback&gt;(</FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">12</FONT></FONT><FONT FACE="Courier New">)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">while</FONT></FONT><FONT FACE="Courier New">(!wasread)</FONT></FONT>
<FONT COLOR="#a9b7c6">            <FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">AVR::dbgout::flush()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">AVR::delay&lt;AVR::ms</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">,</FONT></FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">200</FONT></FONT><FONT FACE="Courier New">&gt;()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">wasread = </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">false;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT FACE="Courier New">}</FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New">}</FONT></FONT></PRE><P ALIGN=LEFT STYLE="margin-bottom: 0cm">
Diese Version erh&auml;lt vom Slave mit der Addresse 42 je Iteration
12 Datenbytes, nachdem diese gelesen wurden wird der Callback
ausgef&uuml;hrt (in diesem Falle werden die Datenbytes &uuml;ber die
Debug-Schnittstelle an den PC gesendet &rarr; nur 4808 verf&uuml;gbar
und die innere While-Schleife der main Methode unterbrochen).</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<PRE CLASS="western" STYLE="background: #2b2b2b"><FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using </FONT>twi = AVR::twi::TWIMaster&lt;AVR::notBlocking&lt;AVR::UseFifo&lt;<FONT COLOR="#6897bb">42</FONT>&gt;<FONT COLOR="#cc7832">,</FONT>AVR::Interrupts&lt;&gt;&gt;<FONT COLOR="#cc7832">,</FONT>twires <FONT COLOR="#cc7832">, </FONT>AVR::ReadWrite&gt;<FONT COLOR="#cc7832">;</FONT></FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#908b25">ISR</FONT>(TWI0_TWIM_vect){</FONT></FONT>
<FONT COLOR="#a9b7c6">    <FONT FACE="Courier New">twi::intHandler()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New">}</FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">volatile bool </FONT>wasread = <FONT COLOR="#cc7832">false;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">static inline void </FONT><FONT COLOR="#ffc66d">Callback </FONT>(){</FONT></FONT>
<FONT COLOR="#a9b7c6">    <FONT FACE="Courier New">wasread=</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">true;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT COLOR="#b9bcd1"><FONT FACE="Courier New">uint8_t </FONT></FONT><FONT FACE="Courier New">item</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">while</FONT></FONT><FONT FACE="Courier New">(twi::getInputFifo().pop_front(item))</FONT></FONT>
<FONT COLOR="#a9b7c6">        <FONT FACE="Courier New">AVR::dbgout::put(item)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New">}</FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">int </FONT><FONT COLOR="#ffc66d">main</FONT>() {</FONT></FONT>
<FONT COLOR="#a9b7c6">    <FONT FACE="Courier New">twi::init()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT FACE="Courier New">AVR::dbgout::init()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">while</FONT></FONT><FONT FACE="Courier New">(</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">true</FONT></FONT><FONT FACE="Courier New">){</FONT></FONT>
<FONT COLOR="#a9b7c6">        <FONT FACE="Courier New">twi::get&lt;</FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">42</FONT></FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">,</FONT></FONT><FONT FACE="Courier New">Callback&gt;(</FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">12</FONT></FONT><FONT FACE="Courier New">)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">while</FONT></FONT><FONT FACE="Courier New">(!wasread)</FONT></FONT>
<FONT COLOR="#a9b7c6">            <FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">AVR::dbgout::flush()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">twi::put&lt;</FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">42</FONT></FONT><FONT FACE="Courier New">&gt;(</FONT><FONT COLOR="#6a8759"><FONT FACE="Courier New">'H'</FONT></FONT><FONT FACE="Courier New">)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">AVR::delay&lt;AVR::ms</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">,</FONT></FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">200</FONT></FONT><FONT FACE="Courier New">&gt;()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">wasread = </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">false;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT FACE="Courier New">}</FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New">}</FONT></FONT></PRE><P ALIGN=LEFT STYLE="margin-bottom: 0cm">
Als abschlie&szlig;endes Beispiel wird hier noch eine kombinierte
Version gezeigt (lesen und Schreiben).</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm; text-decoration: none"><FONT SIZE=3>Beispielbehandlung
TWI Address-NACK:</FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<PRE CLASS="western" STYLE="background: #2b2b2b"><FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">auto </FONT>rd = twi::scopedRead&lt;<FONT COLOR="#6897bb">43</FONT>&gt;()<FONT COLOR="#cc7832">;</FONT></FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">while</FONT>(! twi::writeComplete()) {</FONT></FONT>
<FONT COLOR="#a9b7c6">    <FONT COLOR="#cc7832"><FONT FACE="Courier New">while</FONT></FONT><FONT FACE="Courier New">(! twi::slaveAcknowledged()) {</FONT></FONT>
<FONT COLOR="#a9b7c6">        <FONT COLOR="#cc7832"><FONT FACE="Courier New">while </FONT></FONT><FONT FACE="Courier New">(!twi::endTransaction())</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">rd = twi::scopedRead&lt;</FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">43</FONT></FONT><FONT FACE="Courier New">&gt;()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT FACE="Courier New">}</FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New">}</FONT></FONT></PRE><P ALIGN=LEFT STYLE="margin-bottom: 0cm; text-decoration: none">
<FONT SIZE=3>Hier wird zuerst effektiv auf das Beenden der
Start-Condition gewartet, danach wird eine Stop-Condition ausgel&ouml;st
damit die Start Condition wiederholt werden kann. Die Behandlung
besteht hier darin es solange zu versuchen bis der Slave best&auml;tigt,
andere Behandlungsmethoden sind z.B. das versuchen einer anderen
Adresse oder eine andere Programm-Routine auszuf&uuml;hren.</FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><FONT SIZE=4 STYLE="font-size: 16pt"><U>SPI</U></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm; text-decoration: none"><FONT SIZE=3>Das
SPI-Interface ist &auml;hnlich gestaltet wie bei TWI, mit der
Ausnahme dass hier in keinem Fall auf start- oder stop Conditions
oder der gleichen geachtet werden muss. Weiterhin wird auch ein
Interrupthandler f&uuml;r die Benutzung ohne Fifo und der Slave Modus
zur Verf&uuml;gung gestellt. Hier gibt es keine Option in der init
Methode die Frequenz einzustellen, dies geschieht &uuml;ber die
Prescaler-Option w&auml;hrend der Schnittstellen-Konfiguration.</FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<PRE CLASS="western" STYLE="background: #2b2b2b"><FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using </FONT>spi = AVR::spi::SPIMaster&lt;AVR::notBlocking&lt;AVR::UseFifo&lt;<FONT COLOR="#6897bb">42</FONT>&gt; <FONT COLOR="#cc7832">,</FONT>AVR::NoInterrupts &gt;<FONT COLOR="#cc7832">,</FONT>res<FONT COLOR="#cc7832">, </FONT>AVR::ReadWrite&gt;<FONT COLOR="#cc7832">; </FONT><FONT COLOR="#808080"> </FONT></FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">int </FONT><FONT COLOR="#ffc66d">main</FONT>() {</FONT></FONT>
<FONT COLOR="#a9b7c6">    <FONT FACE="Courier New">spi::init()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT FACE="Courier New">AVR::dbgout::init()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">while</FONT></FONT><FONT FACE="Courier New">(</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">true</FONT></FONT><FONT FACE="Courier New">){</FONT></FONT>
<FONT COLOR="#a9b7c6">        <FONT FACE="Courier New">spi::put(</FONT><FONT COLOR="#6a8759"><FONT FACE="Courier New">'h'</FONT></FONT><FONT FACE="Courier New">)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">spi::put(</FONT><FONT COLOR="#6a8759"><FONT FACE="Courier New">'e'</FONT></FONT><FONT FACE="Courier New">)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">spi::put(</FONT><FONT COLOR="#6a8759"><FONT FACE="Courier New">'l'</FONT></FONT><FONT FACE="Courier New">)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">spi::put(</FONT><FONT COLOR="#6a8759"><FONT FACE="Courier New">'l'</FONT></FONT><FONT FACE="Courier New">)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">spi::put(</FONT><FONT COLOR="#6a8759"><FONT FACE="Courier New">'o'</FONT></FONT><FONT FACE="Courier New">)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">for</FONT></FONT><FONT FACE="Courier New">(</FONT><FONT COLOR="#b9bcd1"><FONT FACE="Courier New">uint8_t </FONT></FONT><FONT FACE="Courier New">i = </FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">0</FONT></FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">; </FONT></FONT><FONT FACE="Courier New">i &lt; </FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">5</FONT></FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">; </FONT></FONT><FONT FACE="Courier New">i++) {</FONT></FONT>
<FONT COLOR="#a9b7c6">            <FONT FACE="Courier New">spi::periodic()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">            </FONT><FONT FACE="Courier New">AVR::delay &lt; AVR::us</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">, </FONT></FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">5 </FONT></FONT><FONT FACE="Courier New">&gt; ()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">}</FONT></FONT>
<FONT COLOR="#a9b7c6">        <FONT COLOR="#b9bcd1"><FONT FACE="Courier New">uint8_t </FONT></FONT><FONT FACE="Courier New">item</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">       </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">while</FONT></FONT><FONT FACE="Courier New">(spi::getInputFifo().pop_front(item)) {</FONT></FONT>
<FONT COLOR="#a9b7c6">           <FONT FACE="Courier New">AVR::dbgout::put(item)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">       </FONT><FONT FACE="Courier New">}</FONT></FONT>
<FONT COLOR="#a9b7c6">        <FONT FACE="Courier New">AVR::dbgout::flush()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT FACE="Courier New">}</FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New">}</FONT></FONT>

</PRE><P>
Die Nicht blockierende Variante ohne Interrupts l&auml;sst sich
ebenso verwenden wie die TWI-Schnittstelle.</P>
<PRE CLASS="western" STYLE="background: #ffffff">

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using </FONT>spi = AVR::spi::SPIMaster&lt;AVR::notBlocking&lt;AVR::UseFifo&lt;<FONT COLOR="#6897bb">42</FONT>&gt; <FONT COLOR="#cc7832">,</FONT>AVR::Interrupts&lt;&gt; &gt;<FONT COLOR="#cc7832">,</FONT>res<FONT COLOR="#cc7832">, </FONT>AVR::ReadWrite&gt;<FONT COLOR="#cc7832">; </FONT></FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#908b25">ISR</FONT>(SPI0_INT_vect){</FONT></FONT>
<FONT COLOR="#a9b7c6">    <FONT FACE="Courier New">spi::intHandler()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New">}</FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">int </FONT><FONT COLOR="#ffc66d">main</FONT>() {</FONT></FONT>
<FONT COLOR="#a9b7c6">    <FONT FACE="Courier New">spi::init()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT FACE="Courier New">AVR::dbgout::init()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">while</FONT></FONT><FONT FACE="Courier New">(</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">true</FONT></FONT><FONT FACE="Courier New">){</FONT></FONT>
<FONT COLOR="#a9b7c6">        <FONT FACE="Courier New">spi::put(</FONT><FONT COLOR="#6a8759"><FONT FACE="Courier New">'h'</FONT></FONT><FONT FACE="Courier New">)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">spi::put(</FONT><FONT COLOR="#6a8759"><FONT FACE="Courier New">'e'</FONT></FONT><FONT FACE="Courier New">)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">spi::put(</FONT><FONT COLOR="#6a8759"><FONT FACE="Courier New">'l'</FONT></FONT><FONT FACE="Courier New">)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">spi::put(</FONT><FONT COLOR="#6a8759"><FONT FACE="Courier New">'l'</FONT></FONT><FONT FACE="Courier New">)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">spi::put(</FONT><FONT COLOR="#6a8759"><FONT FACE="Courier New">'o'</FONT></FONT><FONT FACE="Courier New">)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT COLOR="#b9bcd1"><FONT FACE="Courier New">uint8_t </FONT></FONT><FONT FACE="Courier New">item</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">       </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">while</FONT></FONT><FONT FACE="Courier New">(spi::getInputFifo().pop_front(item)) {</FONT></FONT>
<FONT COLOR="#a9b7c6">           <FONT FACE="Courier New">AVR::dbgout::put(item)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">       </FONT><FONT FACE="Courier New">}</FONT></FONT>
<FONT COLOR="#a9b7c6">        <FONT FACE="Courier New">AVR::dbgout::flush()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT FACE="Courier New">}</FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New">}</FONT></FONT></PRE><P ALIGN=LEFT STYLE="margin-bottom: 0cm">
Hier zu sehen ist eine Interrupt-Version des SPI, um die gelesenen
Bytes auszugeben muss lediglich die fifo ausgelesen werden (siehe
Beispiel). Wird eine ReadWrite Variante genutzt so wird die Library
eine Null transferieren sofern keine Nutzdaten vorhanden sind. Sollte
keine Fifo verwendet und kein WriteOnly eingestellt sein so muss ein
Protokolladapter festgelegt werden.</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><FONT SIZE=4 STYLE="font-size: 16pt"><U>USART</U></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm; text-decoration: none"><FONT SIZE=3>Die
USART Schnittstelle l&auml;sst sich im Grunde genauso bedienen wie
SPI und TWI, allerdings m&uuml;ssen hier besonders 2 Dinge beachtet
werden:<BR>1. Baudrate: Hier ist es essentiell wichtig dass vor allem
der F_CPU Wert stimmt und das eine zu dem Ziel-Ger&auml;t passende
Baudrate eingestellt ist (default 115200).</FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm; text-decoration: none"><FONT SIZE=3>2.
Besonderheit Interrupts: Hier gibt es 2 Interrupt Vectoren (der
TX-Vector wird nicht beachtet) und deswegen auch 2 Interrupt-Handler
(tx/rxHandler).</FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm; text-decoration: none"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><FONT SIZE=3><SPAN STYLE="text-decoration: none">F&uuml;r
den Atmega4808 ist ein Debug-Interface in der Library enthalten
(AVR::dbgout &rarr; include Datei = </SPAN></FONT><FONT COLOR="#000000"><FONT FACE="Times New Roman, serif">inc/Boards/CuriosityNanoIOT.hpp</FONT></FONT><FONT SIZE=3><SPAN STYLE="text-decoration: none">),
mit diesem kann f&uuml;r das IoT-Devboard von Microchip &uuml;ber das
USB-Interface bequem kommuniziert werden, dabei ist zu beachten das
dieses blockierend arbeitet und USART2 benutzt.</SPAN></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
<PRE CLASS="western" STYLE="background: #2b2b2b"><FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">using </FONT>usart =AVR::usart::USART&lt;AVR::notBlocking&lt;AVR::UseFifo&lt;<FONT COLOR="#6897bb">42</FONT>&gt;<FONT COLOR="#cc7832">, </FONT>AVR::Interrupts&lt;&gt;&gt;<FONT COLOR="#cc7832">,</FONT>usartres<FONT COLOR="#cc7832">, </FONT>AVR::ReadWrite&gt;<FONT COLOR="#cc7832">;</FONT></FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#908b25">ISR</FONT>(USART2_DRE_vect){</FONT></FONT>
<FONT COLOR="#a9b7c6">    <FONT FACE="Courier New">usart::txHandler()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New">}</FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#908b25">ISR</FONT>(USART2_RXC_vect){</FONT></FONT>
<FONT COLOR="#a9b7c6">    <FONT FACE="Courier New">usart::rxHandler()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New">}</FONT></FONT>

<FONT COLOR="#a9b7c6"><FONT FACE="Courier New"><FONT COLOR="#cc7832">int </FONT><FONT COLOR="#ffc66d">main</FONT>() {</FONT></FONT>
<FONT COLOR="#a9b7c6">    <FONT FACE="Courier New">usart::init&lt;115200&gt;()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">while</FONT></FONT><FONT FACE="Courier New">(</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">true</FONT></FONT><FONT FACE="Courier New">){</FONT></FONT>
<FONT COLOR="#a9b7c6">        <FONT FACE="Courier New">usart::put(</FONT><FONT COLOR="#6a8759"><FONT FACE="Courier New">'h'</FONT></FONT><FONT FACE="Courier New">)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">usart::put(</FONT><FONT COLOR="#6a8759"><FONT FACE="Courier New">'e'</FONT></FONT><FONT FACE="Courier New">)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">usart::put(</FONT><FONT COLOR="#6a8759"><FONT FACE="Courier New">'l'</FONT></FONT><FONT FACE="Courier New">)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">usart::put(</FONT><FONT COLOR="#6a8759"><FONT FACE="Courier New">'l'</FONT></FONT><FONT FACE="Courier New">)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">usart::put(</FONT><FONT COLOR="#6a8759"><FONT FACE="Courier New">'o'</FONT></FONT><FONT FACE="Courier New">)</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">        </FONT><FONT FACE="Courier New">AVR::delay&lt;AVR::ms</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">,</FONT></FONT><FONT COLOR="#6897bb"><FONT FACE="Courier New">200</FONT></FONT><FONT FACE="Courier New">&gt;()</FONT><FONT COLOR="#cc7832"><FONT FACE="Courier New">;</FONT></FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT COLOR="#cc7832">    </FONT><FONT FACE="Courier New">}</FONT></FONT>
<FONT COLOR="#a9b7c6"><FONT FACE="Courier New">}</FONT></FONT></PRE><P ALIGN=LEFT STYLE="margin-bottom: 0cm">
Hier im Beispiel wird die Verwendung der Interrupt Variante f&uuml;r
Read und Write Zugang beschrieben, beachtet werden muss dass der TX
Vector nicht verwendet werden darf, stattdessen muss der DRE Vector
verwendet werden.</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0cm"><BR>
</P>
</BODY>
</HTML>