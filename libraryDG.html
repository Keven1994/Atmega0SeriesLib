<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.9">
<title>0 Series Library Dev-Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>0 Series Library Dev-Guide</h1>
<div id="toc" class="toc2">
<div id="toctitle">Inhaltsverzeichnis</div>
<ul class="sectlevel1">
<li><a href="#_vorwort">1. Vorwort</a></li>
<li><a href="#_hw_files">2. HW Files</a>
<ul class="sectlevel2">
<li><a href="#_der_header">2.1. Der Header</a></li>
<li><a href="#_die_komponente">2.2. Die Komponente</a></li>
<li><a href="#_die_instanzen">2.3. Die Instanzen</a></li>
</ul>
</li>
<li><a href="#_die_microcontrollerklassen">3. Die Microcontrollerklassen</a>
<ul class="sectlevel2">
<li><a href="#_header">3.1. Header</a></li>
<li><a href="#_klasse">3.2. Klasse</a></li>
<li><a href="#_spezialfall_port">3.3. Spezialfall Port</a></li>
<li><a href="#_komponenten">3.4. Komponenten</a></li>
</ul>
</li>
<li><a href="#_atmegazero_struktur">4. AtmegaZero Struktur</a></li>
<li><a href="#_ressourcecontroller">5. RessourceController</a>
<ul class="sectlevel2">
<li><a href="#_rccomponent">5.1. RCComponent</a></li>
<li><a href="#_die_kernklasse">5.2. Die Kernklasse</a></li>
</ul>
</li>
<li><a href="#_twi_command_und_callback_aufbau">6. TWI Command und Callback Aufbau</a></li>
<li><a href="#_quellen">Quellen</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_vorwort">1. Vorwort</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Es werden hier einige spezielle Aspekte der Library erwähnt,
der Großteil wie z.B. Register oder Port Strukturen setze ich als gegeben vorraus (s.a. <a href="#BMCPP">[BMCPP]</a>).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hw_files">2. HW Files</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Die Software Basiert Komplett auf den im folgenden erläuterten automatisch generierten Dateien.
Aus der HW-Beschreibung von Microchip (*.atdf) wird mit einem mitgelieferten Parser eine C++ Struktur erzeugt,
diese Struktur wird später in der Library verwendet. Das vorliegende Design ist begründet durch die hohe Flexibilität hinsichtlich Änderungen durch
Microchip (durch die Defines der Microchip Library werden bei jedem Kompilieren die Änderungen mit übernommen) sowie die hervorragenden generischen Eigenschaften durch die automatische Erstellungen der Registerstrukturen.
Anders als in BMCPP müssen von Hand keine Register in Header-Dateien geschrieben werden, das wird von dem Parser übernommen und spart somit Zeit und verhindert Flüchtigkeitsfehler.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Die EventSystem Dateien liegen zwar im selben Ordner wie die anderen HW-Dateien, jedoch sind diese wegen ihrer speziellen Struktur von Hand erstellt
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_der_header">2.1. Der Header</h3>
<div class="paragraph">
<p>Jede HW-Datei beginnt nach dem obigen Schema, wegen der Namespaces sind die einzelnen Geräte und Komponenten eindeutig voneinander getrennt. Der erste include bezieht sich auf die Port-Abstraktion, diese wird innerhalb der HW-Dateien genutzt um übersichtliche Strukturen erzeugen zu können. Danach werden die Meta-Funktionen<a href="#BMCPP">[BMCPP]</a> inkludiert, hier wird die List genutzt um die Pins einer Komponente zu einer Liste zu packen, diese kann der Ressource-Controller verwenden um auf Kollisionen zu prüfen.</p>
</div>
<div class="listingblock">
<div class="title">Abbildung 1. Auszug aus ATmega4808SPI.hpp <a href="#ZLib">[ZLib]</a></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
</pre></td>
  <td class="code"><pre><span class="preprocessor">#pragma</span> once
 <span class="preprocessor">#include</span> <span class="include">&quot;../../hw_abstractions/Port.hpp&quot;</span>
 <span class="preprocessor">#include</span> <span class="include">&quot;../../tools/meta.h&quot;</span> <i class="conum" data-value="1"></i><b>(1)</b>

<span class="keyword">namespace</span> mega4808 { <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="keyword">namespace</span> spi_details { <i class="conum" data-value="3"></i><b>(3)</b>
</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Notwendige includes</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Device-Namespace &#8594; jeweils <code>mega</code> + die Nummer</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Komponenten-Namespace &#8594; jeweils die Komponente und <code>_details</code></td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_die_komponente">2.2. Die Komponente</h3>
<div class="ulist">
<div class="title">Die Komponenten Struktur besteht im Grunde aus 2 wesentlichen Teilen:</div>
<ul>
<li>
<p>Einige Enum-Klassen die Später den Registern als typ dient um Funktionen bereit zustellen,
somit ist das übergeben von unbenannten Werten nur erschwert möglich.</p>
</li>
<li>
<p>Die <code>registers</code> Struktur welche  die Registertyp-Deklarationen und Register-Variablen Deklarationen enthält.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Die <code>registers</code> Struktur enthält alle definierten Register der Komponente,
diese sind aus der atdf-Datei abgeleitet und somit sind auch die Attribute des Typs gewählt
(Schreibschutz, Größe &#8230;&#8203;.). Die Variablen Deklarationen sind in der Register Struktur vorhanden um die
Legacy Funktionen "getBaseAddress" aus der BareMetal-CPP Library zu ermöglichen, in der eigentlichen Library finden sie keine Anwendung.
Die Registertypen sind als Pair angegeben und habe noch den Offset-Wert mit angegeben für eine spezielle Funktion
innerhalb der Port Abstraktion.</p>
</div>
<div class="listingblock">
<div class="title">Abbildung 2. Auszug aus ATmega4808SPI.hpp <a href="#ZLib">[ZLib]</a></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td>
  <td class="code"><pre><span class="keyword">struct</span> spiComponent {
        <span class="comment">//lines omitted....</span>
        <span class="keyword">enum</span> <span class="keyword">class</span> <span class="class">INTFLAGSMasks</span> : mem_width {
                Bufovf = SPI_BUFOVF_bm,
                <span class="comment">//...</span>
                Wrcol = SPI_WRCOL_bm
        }; <i class="conum" data-value="1"></i><b>(1)</b>

        <span class="keyword">struct</span> registers {
                <span class="directive">using</span> ctrla = utils::Pair&lt;reg::Register&lt;reg::accessmode::RW,reg::specialization::Control,CTRLAMasks&gt;,<span class="hex">0x0</span>&gt;;
                <span class="directive">using</span> ctrlb = utils::Pair&lt;reg::Register&lt;reg::accessmode::RW,reg::specialization::Control,CTRLBMasks&gt;,<span class="hex">0x1</span>&gt;; <i class="conum" data-value="2"></i><b>(2)</b>
                <span class="comment">//...</span>
                intflags::type Intflags;
                data::type Data; <i class="conum" data-value="3"></i><b>(3)</b>
        };
};</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Spezial-Bits für das Register <code>intflags</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Registertypen und Namen</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Register Variablen Deklarationen</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Das Attribut <code>packed</code> muss nicht für die einzelnen Strukturen gesetzt werden, dem Compiler wird das Flag <code>fpack-struct</code> übergeben.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_die_instanzen">2.3. Die Instanzen</h3>
<div class="paragraph">
<p>Der letzte Teil der HW Dateien besteht aus der <code>spis</code> Struktur,
diese ist eine Sammlung an Ressourcen-Instanzen der Komponente (z.B. USART0, USART1 &#8230;&#8203;).
Die <code>value</code> Funktion wird in der Library an verschiedenen Stellen verwendet,
z.B. in der Port Klasse um dann auf die verschiedenen Register des Ports zuzugreifen.
Hier werden zunächst die Instanzen aufgelistet, auf die verschiedenen Instanzen kann
dann mit der entsprechenden Nummer zugegriffen werden (z.B. USART0 &#8594; usarts::template inst&lt;0&gt;).
Innerhalb der verschiedenen Instanzen befinden sich dann noch die Mappings für die unterschiedlichen Portmux alternativen,
somit wird es einem Benutzer auch ermöglicht verschiedene Alternativen auszuwählen.
Erst innerhalb der Portmux Alternativen finden sich dann die unterschiedlichen Pin-Gruppen und die konkreten Pins.
Wenn also auf die Konkreten Pins zugegriffen werden soll geschieht dies mit der Angabe einer konkreten Instanz sowie der Portmux Alternative.</p>
</div>
<div class="listingblock">
<div class="title">Abbildung 3. Auszug aus ATmega4808SPI.hpp <a href="#ZLib">[ZLib]</a></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
</pre></td>
  <td class="code"><pre><span class="comment">//lines omitted...</span>

<span class="keyword">struct</span> spis {
        <span class="comment">//...</span>
        <span class="keyword">template</span>&lt;<span class="predefined-type">bool</span> dummy&gt;
        <span class="keyword">struct</span> inst&lt;<span class="integer">0</span>, dummy&gt; <i class="conum" data-value="1"></i><b>(1)</b>
         {
                <span class="comment">//...</span>
                [[nodiscard,gnu::always_inline]] <span class="directive">static</span> <span class="directive">inline</span> <span class="directive">auto</span>&amp; value()  { <span class="keyword">return</span> SPI0;} <i class="conum" data-value="2"></i><b>(2)</b>

                <span class="keyword">template</span>&lt;<span class="predefined-type">bool</span> dummy1&gt;
                <span class="keyword">struct</span> alt&lt;<span class="integer">1</span>, dummy1&gt; <i class="conum" data-value="3"></i><b>(3)</b>
                 {
                        <span class="keyword">struct</span> Miso {
                                <span class="directive">using</span> pin0 = AVR::port::details::PortPin&lt;port_details::port&lt;port_details::ports::portc&gt;,<span class="integer">1</span>&gt;;
                        };
                        <span class="comment">//...</span>
                        <span class="keyword">struct</span> Ss {
                                <span class="directive">using</span> pin0 = AVR::port::details::PortPin&lt;port_details::port&lt;port_details::ports::portc&gt;,<span class="integer">3</span>&gt;;
                        }; <i class="conum" data-value="4"></i><b>(4)</b>

                        <span class="directive">using</span> list = Meta::List&lt;<span class="keyword">typename</span> Miso::pin0, <span class="keyword">typename</span> Mosi::pin0, <span class="keyword">typename</span> Sck::pin0, <span class="keyword">typename</span> Ss::pin0&gt;; <i class="conum" data-value="5"></i><b>(5)</b>
                };

                <span class="keyword">template</span>&lt;<span class="predefined-type">bool</span> dummy1&gt;
                <span class="keyword">struct</span> alt&lt;<span class="integer">0</span>, dummy1&gt;
                 {
                        <span class="comment">//lines omitted...</span>
                };

        };

};</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Konkrete Instanz einer Ressource</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Funktion welche die von Microchip definierte Struktur zurückgibt</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Die Portmux-Variante</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>die verschiedenen Gruppen innerhalb einer Portmux-Variante</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Liste von allen Pins die von der Ressource belegt werden können</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Die hier beschriebenen Struktur ist nur relevant wenn die Komponente I/O Pins verwendet
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_die_microcontrollerklassen">3. Die Microcontrollerklassen</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In den Microcontrollerklassen werden die HW-files inkludiert,
des Weiteren stellen die Klassen die Komponenten und deren Konfigurationen zur Verfügung (für die Top-Level Funktionen im AVR-Namespace).
Die Microcontrollerklassen stellen die Konfigurationen für die Library zur Verfügung damit innerhalb der einzelnen Klassen schon vorab spezifische Einstellungen angepasst werden können.
Somit können innerhalb dieser Familie Spezialfälle in den Microcontrollerklassen behandelt werden.
Die Microcontrollerklassen können hinzugefügt werden indem eine fertige kopiert und in eine neue Header-Datei hinzugefügt wird. Anschließend müssen nur die entsprechenden namespaces, Port-Mappings und includes angepasst werden.
Allerdings muss dann auch die entsprechende .atdf Datei hinzugefügt werden und im CMake-File muss die Datei-Generierung ergänzt werden.</p>
</div>
<div class="sect2">
<h3 id="_header">3.1. Header</h3>
<div class="paragraph">
<p>Zu Beginn werden in den Microcontrollerklassen die benötigten Include-Dateien und Typdefinitionen vorgenommen.
Dies ist zunächst der Typ <code>mem_width</code>, dieser bezeichnet die Speicherbreite (z.B. bei den 8-Bit µCs sind das immer 8 Bit), die zweite Typdefinition ist ptr_t und bezeichnet Zeigertyp.
Der erste Hardware-Include muss der Port sein, der Port besitzt innerhalb der Library eine Sonderfunktion, da dieser verwendet wird um andere Funktionen zu ermöglichen.
Daraus folgt dann auch dass der Port eine Vorraussetzung für die anderen Library Funktionen ist. Nach dem Port können die verschiedenen HW-Dateien in beliebiger Reihenfolge inkludiert werden,
da diese immer nur in der entsprechenden Abstraktion benötigt werden.
.Danach kommen die Feststehenden Abstraktionen:
* Die CPU: Ermöglicht das auslesen des Statusregister, diese Funktion wird innerhalb der Scoped-Klasse benutzt.
* Der Resssource-Controller: die dort vorhandene RCComponent-Klasse wird verwendet um qualifizierte Klassen zu identifizieren.
* Die AtmegaZero Datei: Hier werden die Enum-Klassen aus den HW-Dateien nochmals in Atomare Einstellungen unterteilt damit die Schnittstelle besser konfiguriert werden kann.</p>
</div>
<div class="listingblock">
<div class="title">Abbildung 4. Auszug aus Atmega4808.hpp <a href="#ZLib">[ZLib]</a></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td>
  <td class="code"><pre><span class="preprocessor">#pragma</span> once
<span class="directive">using</span> mem_width = uint8_t;
<span class="directive">using</span> ptr_t = uintptr_t; <i class="conum" data-value="1"></i><b>(1)</b>
<span class="preprocessor">#include</span> <span class="include">&quot;../hw_abstractions/Basics.hpp&quot;</span>

<span class="comment">//hw includes</span>
<span class="preprocessor">#include</span> <span class="include">&quot;hal/ATmega4808PORT.hpp&quot;</span>
<span class="preprocessor">#include</span> <span class="include">&quot;mega4808/hal/Atmega4808EventSystem.hpp&quot;</span>
<span class="preprocessor">#include</span> <span class="include">&quot;hal/ATmega4808SPI.hpp&quot;</span>
<span class="comment">//...</span>
<span class="preprocessor">#include</span> <span class="include">&quot;hal/ATmega4808ADC.hpp&quot;</span> <i class="conum" data-value="2"></i><b>(2)</b>
<span class="preprocessor">#include</span> <span class="include">&quot;../hw_abstractions/CPU.hpp&quot;</span>
<span class="preprocessor">#include</span> <span class="include">&quot;../hw_abstractions/RessourceController.hpp&quot;</span>
<span class="preprocessor">#include</span> <span class="include">&quot;../DeviceFamilys/ATmegaZero.hpp&quot;</span> <i class="conum" data-value="3"></i><b>(3)</b>
</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>In folgenden includes benötigte Typdefinitionen</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Hardware-Includes</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Von der Library benötigte includes</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_klasse">3.2. Klasse</h3>
<div class="paragraph">
<p>Innerhalb der Komponenten der Microcontrollerklassen befinden sich private Elemente,
der RessourceController und die Metafunktion benötigen Zugriff auf diese. Wie zuvor schon erwähnt wird die Verwendung des Ressource-Controller mehr oder weniger erzwungen, dies geschieht mit diesen private-Deklarationen, im Prinzip kann sich nur der Ressource-Controller auf die benötigten Elemente Zugriff verschaffen.
Umgehen kann man den Ressource-Controller entweder mit den ungeprüften Ressourcen (siehe <a href="#_ressourcecontroller">RessourceController</a>) oder durch die Verwendung der HW-Klassen in den entsprechenden namespaces.</p>
</div>
<div class="listingblock">
<div class="title">Abbildung 5. Auszug aus Atmega4808.hpp <a href="#ZLib">[ZLib]</a></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td>
  <td class="code"><pre><span class="keyword">template</span>&lt;<span class="directive">auto</span> frequency&gt;
<span class="keyword">class</span> <span class="class">Atmega4808</span> {

        <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Alias&gt;
        <span class="directive">friend</span> <span class="keyword">struct</span> AVR::rc::details::resolveComponent; <i class="conum" data-value="1"></i><b>(1)</b>
<span class="comment">//...</span>
        <span class="directive">public</span>:
        <span class="keyword">struct</span> isZero{}; <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="directive">static</span> <span class="directive">constexpr</span> <span class="directive">auto</span> clockFrequency = frequency;
        <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
        <span class="directive">static</span> <span class="directive">inline</span> <span class="directive">constexpr</span> <span class="predefined-type">bool</span> is_atomic(){
                <span class="keyword">return</span> <span class="predefined-constant">false</span>;
        } <i class="conum" data-value="3"></i><b>(3)</b>
</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Friend-Deklaration für eine Metafunktion zur Bestimmung der Instanzen von Komponenten</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Typdefinition für ein Concept</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Legacy-Funktion aus BMCPP</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Damit bestimmte Tools aus BMCPP verwendet werden können müssen dort Spezialisierungen erstellt werden, dies wird ermöglicht durch die Concepts. ein Concept überprüft vor der Spezialisierung ob die <code>isZero</code> Struktur vorhanden ist, dies hat dann den Vorteil dass innerhalb der älteren Microcontrollerklassen nichts verändert werden muss.
Die is_atomic Funktion musste aus kompatibilitätsgründen übernommen werden, diese Funktion wurde z.B. auch in der Scoped-Klasse aufgerufen.</p>
</div>
</div>
<div class="sect2">
<h3 id="_spezialfall_port">3.3. Spezialfall Port</h3>
<div class="paragraph">
<p>Innerhalb der Microcontrollerklasse ist der Port als Komponente ein Ausnahmefall, weil er nur dazu dient den Portnamen zuzuordnen (und ggf. die legacy BMCPP-Funktion ermöglicht). Der Port als Komponente wird in der Port-Abstraktion genutzt um die Port-Strukturen der Library zu erstellen hierzu wird das gezeigte Mapping angewandt, die daraus entstehenden Strukturen werden in der gesamten Library und vom Benutzer verwendet.</p>
</div>
<div class="listingblock">
<div class="title">Abbildung 6. Auszug aus Atmega4808.hpp <a href="#ZLib">[ZLib]</a></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td>
  <td class="code"><pre><span class="keyword">template</span>&lt;<span class="keyword">typename</span> p&gt; <i class="conum" data-value="1"></i><b>(1)</b>
<span class="keyword">struct</span> Port {

        <span class="directive">using</span> port = <span class="keyword">typename</span> utils::condEqual&lt;AVR::port::A, p, port_details::port&lt;port_details::ports::porta&gt;,
                        <span class="keyword">typename</span> utils::condEqual&lt;AVR::port::C, p, port_details::port&lt;port_details::ports::portc&gt;,
                                        <span class="keyword">typename</span> utils::condEqual&lt;AVR::port::D, p, port_details::port&lt;port_details::ports::portd&gt;,
                                                        <span class="keyword">typename</span> utils::condEqual&lt;AVR::port::F, p, port_details::port&lt;port_details::ports::portf&gt;, <span class="directive">void</span>
                                                        &gt;::type
                                        &gt;::type
                        &gt;::type
        &gt;::type; <i class="conum" data-value="2"></i><b>(2)</b>

        <span class="directive">static</span> <span class="directive">constexpr</span> <span class="directive">auto</span> baseAddress = port::port; <i class="conum" data-value="3"></i><b>(3)</b>

        <span class="directive">private</span>:
        <span class="directive">using</span> Component_t = port_details::portComponent; <i class="conum" data-value="4"></i><b>(4)</b>
};</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Übergabe des Portnamen</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Übersetzung des Portnamen in den HW-Port</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Hilfsvariable für die getBaseAddress Funktion</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Typdeklaration der HW-Komponente</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_komponenten">3.4. Komponenten</h3>
<div class="paragraph">
<p>Diese Struktur zeigt den Aufbau einer Microcontrollerklasse mit der Eigenschaft,
dass die Komponente vom RessourceController verwaltet wird.
Die Setting Struktur ermöglich eine einfache und flexible Konfiguration der Schnittstelle,
aus dieser werden später dann in den entsprechenden <code>init</code> Methoden die Register eingestellt.</p>
</div>
<div class="listingblock">
<div class="title">Abbildung 7. Auszug aus Atmega4808.hpp <a href="#ZLib">[ZLib]</a></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td>
  <td class="code"><pre><span class="keyword">struct</span> USART : <span class="directive">public</span> AVR::rc::details::RCComponent&lt;usart_details::usarts, usart_details::usartComponent&gt;, <i class="conum" data-value="1"></i><b>(1)</b>
                           <span class="directive">public</span> AVR::details::AtmegaZero::<span class="keyword">template</span> USART_C&lt; usart_details::usartComponent&gt; <i class="conum" data-value="2"></i><b>(2)</b>
                           {

        <span class="keyword">template</span>&lt;USART::RS485Mode RSMode, USART::ReceiverMode receiverMode,
                        <span class="comment">//...</span>
                        &gt;
        <span class="keyword">struct</span> USARTSetting {
                <span class="directive">using</span> AConf = usart_details::usartComponent::CTRLAMasks;
                <span class="directive">using</span> BConf = usart_details::usartComponent::CTRLBMasks;
                <span class="directive">using</span> CConf = usart_details::usartComponent::CTRLCMasks;

                <span class="directive">static</span> <span class="directive">constexpr</span> AConf rsmode = <span class="keyword">static_cast</span>&lt;AConf&gt;(RSMode);
                <span class="directive">static</span> <span class="directive">constexpr</span> AConf loopbackmode = LoopBackMode ? AConf::Lbme : <span class="keyword">static_cast</span>&lt;AConf&gt;(<span class="integer">0</span>);
                <span class="directive">static</span> <span class="directive">constexpr</span> BConf opendrainmode = OpenDrainMode ? BConf::Odme : <span class="keyword">static_cast</span>&lt;BConf&gt;(<span class="integer">0</span>);
                <span class="comment">//...</span>
                <span class="directive">static</span> <span class="directive">constexpr</span> CConf msb = !Msb ? CConf::Udord : <span class="keyword">static_cast</span>&lt;CConf&gt;(<span class="integer">0</span>);
        }; <i class="conum" data-value="3"></i><b>(3)</b>
<span class="directive">private</span>:
        <span class="directive">using</span> Component_t = usart_details::usartComponent;
};</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Legt fest dass die Komponente vom RessourceController gesteuert wird</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Importiert die Enum-Klassen der 0 Familie aus der entsprechenden Komponente</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Konfigurationen der Schnittstelle</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Das Erben von RCComponent ermöglicht es dem Ressource-Controller die verschiedenen Instanzen sowie die Register zu sehen (hier z.B. usarts und usartComponent). Der Ressource Controller braucht Zugriff auf die verschiedenen Instanzen des bestimmten µCs um Zugriff auf die Pin-Liste zu bekommen.
Die zweite Oberklasse ermöglicht dann die Konfiguration über die Enum Klassen der 0 Serie, somit werden gut lesbare und Atomare Einstellungen für den Benutzer zur Verfügung gestellt. Der Vorteil der Oberklasse besteht hier darin, dass die Enums für die ganze Familie zur Verfügung stehen und nicht nur für einen µC (somit muss der Vorgang nicht für jeden µC einzeln vorgenommen werden).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_atmegazero_struktur">4. AtmegaZero Struktur</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Diese Struktur dient dazu die verschiedenen Einstellungen aus den HW-Dateien aufzugliedern und in sinnvolle Gruppen zu packen,
sodass in den Setting Strukturen vom Benutzer klare Einstellungen möglich sind.
In C-Style müssten die Benutzer den entsprechenden Registern per Makros und Bit-Operationen dann die entsprechenden Werte zuweisen,
diese Vorgehensweise ist unübersichtlich, fehleranfällig und wird hier ganz klar vermieden.</p>
</div>
<div class="listingblock">
<div class="title">Abbildung 8. Auszug aus ATmegaZero.hpp <a href="#ZLib">[ZLib]</a></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td>
  <td class="code"><pre><span class="keyword">namespace</span> AVR {
    <span class="keyword">namespace</span> details {
        <span class="keyword">struct</span> AtmegaZero {
                        <span class="comment">//...</span>
<span class="keyword">template</span>&lt;<span class="keyword">typename</span> twiComponent&gt;
<span class="keyword">struct</span> TWI_C {
        <span class="keyword">enum</span> <span class="keyword">class</span> <span class="class">SDASetup</span>: mem_width {
                SDASetup_off = <span class="keyword">static_cast</span>&lt;mem_width&gt;(twiComponent::CTRLAMasks::Sdahold_off),
                SDASetup_50ns = <span class="keyword">static_cast</span>&lt;mem_width&gt;(twiComponent::CTRLAMasks::Sdahold_50ns) ,
                SDASetup_300ns = <span class="keyword">static_cast</span>&lt;mem_width&gt;(twiComponent::CTRLAMasks::Sdahold_300ns) ,
                SDASetup_500ns = <span class="keyword">static_cast</span>&lt;mem_width&gt;(twiComponent::CTRLAMasks::Sdahold_500ns) ,
        };

        <span class="keyword">enum</span> <span class="keyword">class</span> <span class="class">SDAHold</span>: mem_width {
        <span class="comment">//...</span>
};</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ressourcecontroller">5. RessourceController</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Der Ressourcecontroller hat die Aufgabe die Ressourcen und ihre Pinbelegungen miteinander zu Vergleichen, hierzu verwendet der Ressourcecontroller die in den HW-files enthaltenen Pin-lists, der Parser fügt diese Listen automatisch hinzu, dies hat also den Vorteil dass ohne großen Aufwand während der Compile-Zeit schon Kollisionen ausgeschlossen werden können. Zusätzlich ist der Ressource-Controller so konzipiert, dass bei normaler Verwendung der Library das Verwenden des Ressource-Controller notwendig ist. Die Verwendung des Ressource-Controller kann auch Umgangen werden, diese Funktionalität wurde eingebaut damit man als erfahrener Benutzer sämtliche Möglichkeiten ausschöpfen kann.</p>
</div>
<div class="sect2">
<h3 id="_rccomponent">5.1. RCComponent</h3>
<div class="paragraph">
<p>Diese Struktur wird im RessourceController genutzt um z.B. auf die HW-Instanzen zuzugreifen um schließlich die IO Pins zu vergleichen.
Je nach Komponente ist e möglich dass nicht alle Pins überprüft werden die in den Komponenten verfügbar sind, z.B. der ADC.</p>
</div>
<div class="listingblock">
<div class="title">Abbildung 9. Auszug aus RessourceController.hpp <a href="#ZLib">[ZLib]</a></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre></td>
  <td class="code"><pre><span class="keyword">template</span>&lt;<span class="keyword">typename</span> instances, <span class="keyword">typename</span> Component_t, <span class="keyword">typename</span> instances2 = <span class="directive">void</span>&gt;
<span class="keyword">class</span> <span class="class">RCComponent</span> {

        <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Alias&gt;
        <span class="directive">friend</span> <span class="keyword">struct</span> AVR::rc::details::resolveComponent;

        <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Alias, <span class="keyword">typename</span> T = instances2&gt;
        <span class="keyword">struct</span> comps {
                <span class="directive">using</span> inst  = <span class="keyword">typename</span>  instances::inst;
                <span class="directive">using</span> alt  = <span class="keyword">typename</span>  inst::alt;

                <span class="keyword">static_assert</span>(Meta::contains_all&lt;<span class="keyword">typename</span> instances2::<span class="keyword">template</span> inst&lt;Alias::Instance&gt;::<span class="keyword">template</span> alt&lt;Alias::Alternative&gt;::list,<span class="keyword">typename</span> alt::list&gt;::value, <span class="string"><span class="delimiter">&quot;</span><span class="content">not available pin was set up</span><span class="delimiter">&quot;</span></span>);
        }; <i class="conum" data-value="1"></i><b>(1)</b>

        <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Alias&gt;
        <span class="keyword">struct</span> comps&lt;Alias,<span class="directive">void</span>&gt;{
                <span class="directive">using</span> inst  = <span class="keyword">typename</span>  instances::<span class="keyword">template</span> inst&lt;Alias::Instance&gt;;
                <span class="directive">using</span> alt  = <span class="keyword">typename</span>  inst::<span class="keyword">template</span> alt&lt;Alias::Alternative&gt;;
        }; <i class="conum" data-value="2"></i><b>(2)</b>
<span class="directive">public</span>:
        <span class="directive">static</span> <span class="directive">constexpr</span> <span class="predefined-type">bool</span> isRCComponent = <span class="predefined-constant">true</span>;

        <span class="keyword">template</span>&lt;<span class="directive">auto</span> number&gt;
        <span class="directive">static</span> <span class="directive">inline</span> <span class="directive">auto</span> getBaseAddress(){
                <span class="keyword">return</span> (<span class="keyword">typename</span> Component_t::registers*) &amp;instances::<span class="keyword">template</span> inst&lt;number&gt;::value();
        } <i class="conum" data-value="3"></i><b>(3)</b>

};</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Spezialisierung für eine Teilprüfung der IO Pins</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Spezialisierung für eine Vollprüfung der IO Pins</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Realisierung der BCMPP legacy-Funktion getBaseAddress</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Hier wird die Comps-Struktur verwendet um zwischen den verschiedenen Komponenten (alle Pins überprüfen oder nicht) zu unterscheiden, wenn der Typ <code>void</code> entspricht so werden die Pins aus den HW-Dateien verwendet. Im zweiten Fall werden nicht die Pins aus den HW-Dateien, sondern die vom Benutzer übergebenen Pins verwendet.</p>
</div>
</div>
<div class="sect2">
<h3 id="_die_kernklasse">5.2. Die Kernklasse</h3>
<div class="paragraph">
<p>Hier wird als erstes die MCU übergeben (idr. DEFAULT_MCU), danach folgen eine bis beliebig viele Ressourcen (0 Ressourcen macht keinen Sinn). Die beiden Alias Metafunktionen sollen jeweils die erste oder 2. Ebene in der HW-Struktur einer Instanz zurückgeben und eine kürzere und übersichtlichere Schreibweise innerhalb des RC zur Folge haben.</p>
</div>
<div class="listingblock">
<div class="title">Abbildung 10. Auszug aus RessourceController.hpp <a href="#ZLib">[ZLib]</a></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
</pre></td>
  <td class="code"><pre><span class="keyword">template</span>&lt;<span class="keyword">typename</span> MCU,<span class="keyword">typename</span> FIRST,<span class="keyword">typename</span>... INSTANCES&gt;
<span class="keyword">class</span> <span class="class">ResController</span> {

        <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Alias&gt;
        <span class="directive">using</span> resolveAlt = <span class="keyword">typename</span> details::resolveComponent&lt;Alias&gt;::alt;
        <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Alias&gt;
        <span class="directive">using</span> resolveInst = <span class="keyword">typename</span> details::resolveComponent&lt;Alias&gt;::inst;</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Hier zu sehen sind die einzelnen Prüfungen die der RessourceController durchführt während er die angeforderte Ressource frei gibt.</p>
</div>
<div class="listingblock">
<div class="title">Abbildung 11. Auszug aus RessourceController.hpp <a href="#ZLib">[ZLib]</a></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
</pre></td>
  <td class="code"><pre><span class="keyword">template</span>&lt;<span class="keyword">typename</span> N&gt;
<span class="keyword">struct</span> getRessource {
        <span class="directive">using</span> type = utils::tuple&lt;<span class="keyword">typename</span> get_ressource_help&lt;N, FIRST, INSTANCES...&gt;::inst,<span class="keyword">typename</span> get_ressource_help&lt;N, FIRST, INSTANCES...&gt;::alt&gt;;
                <span class="keyword">static_assert</span>(!std::is_same&lt;<span class="keyword">typename</span> type::t2, <span class="directive">void</span>&gt;::value, <span class="string"><span class="delimiter">&quot;</span><span class="content">portmux not found</span><span class="delimiter">&quot;</span></span>); <i class="conum" data-value="1"></i><b>(1)</b>
                <span class="keyword">static_assert</span>(checkRessource&lt;FIRST, INSTANCES...&gt;(), <span class="string"><span class="delimiter">&quot;</span><span class="content">I/O Pins conflicting</span><span class="delimiter">&quot;</span></span>); <i class="conum" data-value="2"></i><b>(2)</b>
                <span class="keyword">static_assert</span>(checkInstance&lt;FIRST, INSTANCES...&gt;(), <i class="conum" data-value="3"></i><b>(3)</b>
                                          <span class="string"><span class="delimiter">&quot;</span><span class="content">only 1 alternative from a single instance permitted</span><span class="delimiter">&quot;</span></span>);
};

<span class="keyword">template</span>&lt;<span class="keyword">typename</span> N&gt;
<span class="directive">using</span> getRessource = <span class="keyword">typename</span> getRessource&lt;N&gt;::type;</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Prüfung ob die Portmux-Variante existiert</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Prüfung ob die I/O Pins Kollisionsfrei sind</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Prüfung auf doppelt Belegung einer Instanz durch mehrere Portmux-Varianten</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Diese Prüfungen haben zu Folge dass der Benutzer keine doppelt belegten Pins, keine 2 verschiedenen Portmux-Alternativen aus derselben Instanz und keine nicht existierenden Ressourcen belegen kann.
Die erste Prüfung wird einen Fehler produzieren wenn der Rückgabetyp der <code>get_ressource_help</code> Funktion <code>void</code> ist, d.h. die Funktion hat keine Ressource <code>N</code> gefunden.
==== Zu Punkt 2</p>
</div>
<div class="paragraph">
<p>Dies ist die Startfunktion um zu Prüfen ob die Pins Kollisionsfrei sind,
hierzu wird die Liste der Pins innerhalb der konkreten Instanzen benötigt.
Falls <code>pins</code> 0 Elemente enthält gibt es nur eine Ressource und somit keine Kollision,
ansonsten muss die rekursive Hilfsfunktion aufgerufen werden.</p>
</div>
<div class="listingblock">
<div class="title">Abbildung 12. Auszug aus RessourceController.hpp <a href="#ZLib">[ZLib]</a></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
</pre></td>
  <td class="code"><pre><span class="keyword">template</span>&lt;<span class="keyword">typename</span> _first,<span class="keyword">typename</span>... pins&gt;
<span class="directive">static</span> <span class="directive">constexpr</span> <span class="predefined-type">bool</span> checkRessource() {
        <span class="directive">using</span> first = <span class="keyword">typename</span> resolveAlt&lt;_first&gt;::list;

        <span class="keyword">if</span> <span class="directive">constexpr</span>(<span class="keyword">sizeof</span>...(pins) == <span class="integer">0</span>)
        <span class="keyword">return</span> <span class="predefined-constant">true</span>;
        <span class="keyword">else</span> <span class="keyword">return</span> checkRessourceHelper&lt;first,pins...&gt;();
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Die Prüfung auf Kollisionsfreiheit Funktioniert so, dass auf der aktuellen Stufe immer überprüft wird ob irgendein Element der aktuellen Pinliste in der nächsten enthalten ist, danach wird die aktuelle Liste mit der nächsten vereinigt und als erste Liste übergeben, das geht solange bis es in <code>pins</code> keine weiteren Listen mehr gibt.</p>
</div>
<div class="listingblock">
<div class="title">Abbildung 13. Auszug aus RessourceController.hpp <a href="#ZLib">[ZLib]</a></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td>
  <td class="code"><pre><span class="keyword">template</span>&lt;Meta::concepts::List first,<span class="keyword">typename</span> _second, <span class="keyword">typename</span>... pins&gt;
<span class="directive">static</span> <span class="directive">constexpr</span> <span class="predefined-type">bool</span> checkRessourceHelper(){

        <span class="directive">using</span> second = <span class="keyword">typename</span> resolveAlt&lt;_second&gt;::list;

        <span class="keyword">if</span> <span class="directive">constexpr</span>(<span class="keyword">sizeof</span>...(pins) &gt; <span class="integer">0</span>){
                <span class="directive">constexpr</span> <span class="predefined-type">bool</span> current = !Meta::contains_any&lt;first, second&gt;::value; <i class="conum" data-value="1"></i><b>(1)</b>
                <span class="directive">constexpr</span> <span class="predefined-type">bool</span> next =  checkRessourceHelper&lt;Meta::concat_t&lt;first,second&gt;, pins...&gt;(); <i class="conum" data-value="2"></i><b>(2)</b>
                <span class="keyword">return</span>  current &amp;&amp; next ;
        }
        <span class="keyword">else</span> {
                <span class="keyword">return</span> !Meta::contains_any&lt;first,second&gt;::value; <i class="conum" data-value="3"></i><b>(3)</b>
        }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Aktuelle Rekursionsstufe</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Nächste Rekursionsstufe</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Rekursionsende</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Die CheckInstance Methode funktioniert Analog (bloß das die Pinlisten nicht überprüft werden sondern die HW-Instanzen)
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_twi_command_und_callback_aufbau">6. TWI Command und Callback Aufbau</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Die TWI Schnittstelle ist grundsätzlich so Aufgebaut dass sie (wenn mit Fifos benutzt) genauso verwendet werden kann wie die anderen Kommunikationsschnittstellen, die einzige Besonderheit ist das Callback beim lesen. Damit diese einfache Bedienung der Schnittstelle möglich ist, müssen Intern die Command Strukturen gespeichert werden.</p>
</div>
<div class="listingblock">
<div class="title">Abbildung 14. Auszug aus TWI.hpp <a href="#ZLib">[ZLib]</a></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td>
  <td class="code"><pre><span class="directive">static</span> <span class="directive">inline</span> <span class="directive">auto</span> noop = []{}; <i class="conum" data-value="1"></i><b>(1)</b>

<span class="keyword">template</span>&lt;<span class="predefined-type">bool</span> singlemode = <span class="predefined-constant">false</span>, <span class="predefined-type">bool</span> callback = <span class="predefined-constant">false</span>&gt;
<span class="keyword">struct</span> Command {
        uint8_t address = <span class="integer">0</span>; <i class="conum" data-value="2"></i><b>(2)</b>
        uint8_t bytes = <span class="integer">0</span>; <i class="conum" data-value="3"></i><b>(3)</b>
        readWrite access = write; <i class="conum" data-value="4"></i><b>(4)</b>
        <span class="directive">void</span> (*Callback)() = (<span class="directive">void</span> (*)()) noop; <i class="conum" data-value="5"></i><b>(5)</b>

        <span class="directive">void</span> <span class="directive">operator</span>=(<span class="directive">const</span> <span class="directive">volatile</span> Command &amp;other) <span class="directive">volatile</span> {
                address = other.address;
                bytes = other.bytes;
                access = other.access;
                Callback = other.Callback;
        }
};</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Leerer Funktionsaufruf (wenn geschrieben wird)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Adresse des anderen Device</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Anzahl zu lesender/schreibender Bytes</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Lesen oder Schreiben</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Callback für lesen</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Die Command Struktur wird benötigt um gewisse Informationen zur Laufzeit zu speichern und auszuwerten.
Diese Struktur wiederum wird in einer Fifo gespeichert, wenn z.B. Bytes gelesen werden sollen so wird eine entsprechende
Command Struktur erzeugt und in der Fifo abgelegt. Eine statische Callback Funktion wäre hier nicht sinnvoll, da auch zur Laufzeit entschieden wird ob das aktuelle Kommando ein Lese-oder Schreibvorgang ist.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Die oben gezeigte Command Struktur besitzt noch einige Spezialisierungen um bei verschiedenen Konditionen nicht benötigte Member auszulassen (z.B bei einem WriteOnly wird weder das Callback- noch das Accessmember benötigt).
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Abbildung 15. Auszug aus TWI.hpp <a href="#ZLib">[ZLib]</a></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
</pre></td>
  <td class="code"><pre><span class="directive">static</span> <span class="directive">inline</span> <span class="directive">void</span> put(bit_width *data, uint8_t size) {

        <span class="keyword">if</span> <span class="directive">constexpr</span>(_TWI::isWriteOnly)
                CommandStack.push_back(command{(address &lt;&lt; <span class="integer">1</span>), size}); <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="keyword">else</span>
                CommandStack.push_back(command{(address &lt;&lt; <span class="integer">1</span>), size, write}); <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">for</span> (uint8_t i = <span class="integer">0</span>; i &lt; size; i++)
                _TWI::fifoOut.push_back(data[i]);
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Command Konstruktor für WriteOnly</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Command Konstruktor für ReadWrite</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In diesem Beispiel wird gezeigt wie die Command Struktur genutzt wird um Befehle in eine Fifo zu legen,
während dem Periodic Aufruf oder der Interrupt Routine können die Befehle dann aus der Fifo entnommen und verarbeitet werden.
Das Kommando wird hier erzeugt mit dem Konstruktor: uint8_t Adresse und uint8_t Größe, wenn die Schnittstelle als ReadWrite konfiguriert ist, muss noch die Information hinzugefügt werden, dass es ein Schreibvorgang ist.
Beim Lesen verhält es sich Analog, jedoch mit dem Zusatz, dass als letztes Member noch ein Callback in die Command-Struktur gelegt wird.</p>
</div>
<div class="listingblock">
<div class="title">Abbildung 16. Auszug aus TWI.hpp <a href="#ZLib">[ZLib]</a></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td>
  <td class="code"><pre><span class="comment">//RW Branch</span>
<span class="predefined-type">bool</span> newCommand = <span class="predefined-constant">false</span>; <i class="conum" data-value="1"></i><b>(1)</b>

<span class="keyword">if</span>(TWIMaster::current.access == read){ <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">if</span> ( TWIMaster::current.bytes &gt; <span class="integer">1</span>) {
                TWIMaster::_TWI::receive();
        } <span class="keyword">else</span> <span class="keyword">if</span>( TWIMaster::current.bytes == <span class="integer">1</span>) {
                stopTransactionNack();
                TWIMaster::_TWI::receive();
                TWIMaster::current.bytes = <span class="integer">0</span>;
                TWIMaster::current.Callback();
                <span class="keyword">typename</span> TWIMaster::command tmp;
                <span class="keyword">if</span> (TWIMaster::CommandStack.pop_front(tmp)) {
                        TWIMaster::current = tmp;
                        newCommand = <span class="predefined-constant">true</span>;
                }
        }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Boolsche Variable zur Feststellung ob ein neues Kommando folgt</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Prüfung auf Zugriffsart</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Zunächst wird im IH unterschieden ob es sich beim aktuellen Element um ein Lese- oder Schreibvorgang handelt, je nachdem wird dann die receive() oder die transfer() Methode aufgerufen, diese Methoden führen dann noch Aktionen auf dem <code>current</code> Member der Oberklasse aus (dekrementieren der bytes Variable). Im Lesevorgang muss speziell geprüft werden ob noch ein Element zu versenden ist, wenn ja muss vor der receive() Methode ein Nack mit einer Stop-Condition gesendet und abschließend der Callback ausgeführt werden, alle anderen Vorgehensweisen führen zu Buskollisionen oder anderen ungewünschten Verhaltensweisen. Der nächste Schritt ist das herausnehmen des neuen Kommandos aus der Fifo, nebenbei wird die Variable newCommand auf <code>true</code> gesetzt, diese wird anschließend genutzt um zu prüfen ob noch auf die Stop-Condition gewartet werden muss.</p>
</div>
<div class="listingblock">
<div class="title">Abbildung 17. Auszug aus TWI.hpp <a href="#ZLib">[ZLib]</a></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="cpp"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
</pre></td>
  <td class="code"><pre><span class="keyword">if</span>(newCommand){
        <span class="keyword">while</span>(! (alt::Scl::pin0::isOn() &amp;&amp; alt::Sda::pin0::isOn())); <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="keyword">if</span>(TWIMaster::current.access == read){
                readCondition();
        } <span class="keyword">else</span> {
                writeCondition();
        } <i class="conum" data-value="2"></i><b>(2)</b>
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Warten auf die Beendigung der Stop-Condition</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Auslösen der neuen Read oder Write Start-Condition</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Nachdem das neue Kommando übernommen wurde ist es notwendig auf das Beenden der Stop-Condition zu warten, direkt danach kann dann die neue Start-Condition gesendet werden, ansonsten wird der IH nicht wieder aufgerufen und das nächste Element nicht gesendet.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_quellen">Quellen</h2>
<div class="sectionbody">
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="ZLib"></a>[ZLib] Keven Klöckner. Atmega 0 Series Lib:
<a href="https://github.com/Keven1994/Atmega0SeriesLib" class="bare">https://github.com/Keven1994/Atmega0SeriesLib</a></p>
</li>
<li>
<p><a id="libcpp"></a>[libcpp] Free Software Foundation, Inc. Libstdc++:
<a href="https://gcc.gnu.org/" class="bare">https://gcc.gnu.org/</a></p>
</li>
<li>
<p><a id="BMCPP"></a>[BMCPP] Prof. Dr.-Ing Wilhelm Meier. BmCPP
<a href="https://sourceforge.net/projects/wmucpp/" class="bare">https://sourceforge.net/projects/wmucpp/</a></p>
</li>
<li>
<p><a id="MDok"></a>[MDok] Microchip. Atmega 0-series Family Data Sheet
<a href="http://ww1.microchip.com/downloads/en/DeviceDoc/megaAVR0-series-Family-Data-Sheet-DS40002015B.pdf" class="bare">http://ww1.microchip.com/downloads/en/DeviceDoc/megaAVR0-series-Family-Data-Sheet-DS40002015B.pdf</a></p>
</li>
<li>
<p><a id="ASF"></a>[ASF] Microchip. Advanced Software Framework:
<a href="http://ww1.microchip.com/downloads/en/DeviceDoc/asf-standalone-archive-3.46.0.94.zip" class="bare">http://ww1.microchip.com/downloads/en/DeviceDoc/asf-standalone-archive-3.46.0.94.zip</a></p>
</li>
<li>
<p><a id="PUGI"></a>[PUGI] Arseny Kapoulkine. Pugi XML-Parser:
<a href="https://pugixml.org/" class="bare">https://pugixml.org/</a></p>
</li>
<li>
<p><a id="STM"></a>[STM] STMicroelectronics. STM Hal Dokumentation:
<a href="https://www.st.com/content/ccc/resource/technical/document/user_manual/2f/71/ba/b8/75/54/47/cf/DM00105879.pdf/files/DM00105879.pdf/jcr:content/translations/en.DM00105879.pdf" class="bare">https://www.st.com/content/ccc/resource/technical/document/user_manual/2f/71/ba/b8/75/54/47/cf/DM00105879.pdf/files/DM00105879.pdf/jcr:content/translations/en.DM00105879.pdf</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2019-05-27 09:13:44 +0200
</div>
</div>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid currentColor;opacity:.35;padding:0 .5em 0 0}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</body>
</html>